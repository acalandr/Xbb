#! ------------------------
#!! GENERAL CONFIGURATION
#!! -------------------------

[General]
#Set to True or False to display debug messages
Debug: True

[Analysis]
tag = 13TeV

# BDT to discriminate Signal and Background
#!! If this Flag is used then 50% of MC samples will go in training and the rest will be scaled up by a factor of 2.
#!! if you train on 50% but then set it to 'False' while writing DC, then you get your biased training samples in the limit!!!
#!! be sure to have this right !!!
;#When computing SF from CR, set this flag to false
;if one wants to use Mjj -> put to False
;Rescale MC by factor 2 if true
TrainFlag = True
;TrainFlag = False

;Current BDT FOM: Cls of train/vs CLs of test sample. To produce the DC on train sample, set this flag to True.
;!!!IMPORTANT: BE SURE TO HAVE "UseTrainSample = False" WHEN COMPUTING THE FINAL LIMIT !!!
UseTrainSample = False
;UseTrainSample = True

;ALWAYS set to False, unless training to produce correlation plots
Data_as_signal = False

;;;;
;FOR SYS
;;;;
[Sys]

; note: should first run a sys step including vLeptons only, and then submit the remaining systematics
;Will not add new branch for now
;Not adding Higgs systematics atm (as it is slooooow)
sys_v2  = ['Sys.TTweights','Sys.LeptonWeights','Sys.EWKweights','Sys.BTagWeights','Sys.isSignal', 'Sys.isWH', 'Sys.isData', 'Sys.HeppyStyleGen', 'Sys.FitCorr','Sys.GetTopMass','Sys.GetWTMass','Sys.DYspecialWeight']

;Adding boosted systematics (Thea and DoubleBTag)
sys_v3  = ['Sys.TheaCorr_msoftdropNano','Sys.DoubleBTagWeightsNano']

;Adding smearing
sys_v4  = ['Sys.FatJetMassJER']

;All sys but JEC
sys_v5  = ['Sys.newCutBranches','Sys.newBranches']
;Include the Btag weight used for the signal
sys_v6 = ['Sys.DoubleBTagWeightsNano']


# Boosted corrections
TheaCorr_msoftdropNano  = TheaCorr_msoftdropNano.TheaCorr_msoftdropNano()
DoubleBTagWeightsNano   = DoubleBTagWeightsNano.DoubleBTagWeightsNano()
FatJetMassJER           = FatJetMassJER.FatJetMassJER(Rnom = 2, Rdown = 0.8, Rup = 1.2, Snom = 1, Sdown = 0.9906, Sup = 1.0094)
HiggsCandidateSystematics = HiggsCandidateSystematics.HiggsCandidateSystematics(addSystematics=True, addBoostSystematics=True)
DoubleBTagWeightsSimFit = DoubleBTagWeightsSimFit.DoubleBTagWeightsSimFit()
VptWeightSimFit = VptWeightSimFit.VptWeightSimFit()


# Inclusive and resolved corrections
vLeptons = vLeptons.vLeptons() 
TTweights = TTWeights.TTWeights(nano=True)
LeptonWeights = LeptonWeightsNano.LeptonWeights(channel='Wlv')
#EWKweights = EWKweights.EWKweights(nano=True,tagidx='hJidxCMVA')
EWKweights = EWKweights.EWKweights(nano=True)
BTagWeights = BTagWeights.BTagWeights(nano=True,fileCSV='data/btag/CSVv2_Moriond17_B_H.csv',fileCMVA='data/btag/cMVAv2_Moriond17_B_H.csv',useLeaves=False)
isSignal = PerSampleWeight.PerSampleWeight(branchName='isSignal',affectedSampleNames=['WminusH','WplusH'],weightAffected=1.0,weightUnaffected=0.0)
isWH = PerSampleWeight.PerSampleWeight(branchName='isWH',affectedSampleNames=['WminusH','WplusH'],weightAffected=1.0,weightUnaffected=0.0)
isData = PerSampleWeight.PerSampleWeight(branchName='isData',affectedSampleNames=['SingleMuon', 'SingleElectron'],weightAffected=1.0,weightUnaffected=0.0)
HeppyStyleGen = HeppyStyleGen.HeppyStyleGen()
#GetTopMass = GetTopMass.GetTopMass(nano=True, propagateJES=True, tagidx='hJidxCMVA') 
GetTopMass = GetTopMass.GetTopMass(nano=True, propagateJES=True) 
GetWTMass = GetWTMass.GetWTMass(nano=True) 
FitCorr = addFitCorr.addFitCorr(nano=True) 
; name is missleading (DY was because first implemented in Zll)
DYspecialWeight = DYspecialWeight.DYspecialWeight()
Skim = Skim.Skim('V_pt>100')

;for boosted (smearing and scale of softdrop mass)
Snom = 1
Sdown = 0.9906
Sup = 1.0094

Rnom = 1
Rdown = 0.8
Rup = 1.2

;doubleB tag from simul. fit
tt_nom      = 0.062471
tt_uncert   = 0.000146109
vvl_nom     = 0.188145
vvl_uncert  = 0.0124451
whf_nom     = 0.0701095
whf_uncert  = 0.157096
wlf_nom     = 0.20153
wlf_uncert  = 0.0162961

doubleBlow  = -0.8
doubleBhigh = 1

tt_nom_Vpt      = 0
tt_uncert_Vpt   = 0.0000896
whf_nom_Vpt     = 0.
whf_uncert_Vpt  = 0.0003562
wlf_nom_Vpt     = -0.000548
wlf_uncert_Vpt  = 0.000087

Vptlow  = 250
 

newBranches = BranchTools.TreeFormulas({
#usefull branch for cut
    'NoutsideB':'Sum$(VHbb::deltaR(FatJet_eta[Hbb_fjidx],FatJet_phi[Hbb_fjidx],Jet_eta,Jet_phi)> 0.8 &&Jet_btagCMVA > -0.5884)'
    })

#newCutBranches = BranchTools.newCutBranches()
newCutBranches = BranchTools.newCutBranches({
#resolved dc
    'Wlm_SR_HighPt':'dc',
    'Wle_SR_HighPt':'dc',
    'Wlm_Wlf_HighPt':'dc',
    'Wle_Wlf_HighPt':'dc',
    'Wlm_tt_HighPt':'dc',
    'Wle_tt_HighPt':'dc',
    'Wlm_WhflM_HighPt':'dc',
    'Wle_WhflM_HighPt':'dc',
    'Wlm_WhfhM_HighPt':'dc',
    'Wle_WhfhM_HighPt':'dc',
#usefull branch for cut
	  'NaddLep':'General',
#BOOST control and signal region
	  'tt_BOOST':'Cuts',
	  'Whf_BOOSTv2':'Cuts',
	  'Wlf_BOOSTv11':'Cuts',
	  'Signal_BOOSTv3':'Cuts',
    })

;!! -------------------------
;!! REGRESSION
;!! -------------------------
[Regression]
;Set to True for the  regression to be included during the 'sys' step.
;applyRegression = True
applyRegression = False

writeNewVariablesDict=[
        {'name': 'BasicCutsCMVA', 'formula': '((Vtype==1&&HLT_Ele23_Ele12_CaloIdL_TrackIdL_IsoVL_DZ&&Sum$(Electron_pt>20&&Electron_mvaSpring16GP_WP90&&(abs(Electron_eta)>=1.57||abs(Electron_eta)<=1.44)&&Electron_pfRelIso03_all<0.15)>=2)||(Vtype==0&&(HLT_Mu17_TrkIsoVVL_Mu8_TrkIsoVVL || HLT_Mu17_TrkIsoVVL_TkMu8_TrkIsoVVL || HLT_Mu18_TrkIsoVVL_Mu8_TrkIsoVVL_DZ || HLT_Mu17_TrkIsoVVL_TkMu8_TrkIsoVVL_DZ)&&Sum$(Muon_pfRelIso04_all<0.25)>=2))'},
        {'name': 'Jet_btagCMVAV2_0', 'formula': 'Jet_btagCMVA[hJidx[0]]'},
        {'name': 'Jet_btagCMVAV2_1', 'formula': 'Jet_btagCMVA[hJidx[1]]'},
        {'name': 'Jet_pt_reg_0', 'formula': 'Jet_bReg[hJidx[0]]*Jet_Pt[hJidx[0]]/Jet_pt[hJidx[0]]'},
        {'name': 'Jet_pt_reg_1', 'formula': 'Jet_bReg[hJidx[1]]*Jet_Pt[hJidx[1]]/Jet_pt[hJidx[1]]'},
    ]

;regWeight = weights/MVA_BDT_REG_ZllHbbRegression_ZH_HToBB_ZToLL_M125_pow.weights.xml
regWeight = weights/TMVARegression_BDTG.weights.xml

regVars = ['Jet_pt','nPVs','Jet_eta','Jet_mt','Jet_leadTrackPt','Jet_leptonPtRel','Jet_leptonPt','Jet_leptonDeltaR','Jet_neHEF','Jet_neEmEF','Jet_vtxPt','Jet_vtxMass','Jet_vtx3dL','Jet_vtxNtrk','Jet_vtx3deL']

regDict = {'Jet_pt':'Alt$(Jet_pt[hJCidx[0]],0)','nPVs':'Alt$(nPVs,0)','Jet_eta':'Alt$(Jet_eta[hJCidx[0]],0)','Jet_mt':'Alt$(Jet_mt[hJCidx[0]],0)','Jet_leadTrackPt':'Alt$(Jet_leadTrackPt[hJCidx[0]],0)','Jet_leptonPtRel':'max(Alt$(Jet_leptonPtRel[hJCidx[0]],0),0)','Jet_leptonPt':'max(Alt$(Jet_leptonPt[hJCidx[0]],0),0)','Jet_leptonDeltaR':'max(Alt$(Jet_leptonDeltaR[hJCidx[0]],0),0)','Jet_neHEF':'Alt$(Jet_neHEF[hJCidx[0]],0)','Jet_neEmEF':'Alt$(Jet_neEmEF[hJCidx[0]],0)','Jet_vtxPt':'Alt$(Jet_vtxPt[hJCidx[0]],0)','Jet_vtxMass':'Alt$(Jet_vtxMass[hJCidx[0]],0)','Jet_vtx3dL':'Alt$(Jet_vtx3DVal[hJCidx[0]],0)','Jet_vtxNtrk':'Alt$(Jet_vtxNtracks[hJCidx[0]],0)','Jet_vtx3deL':'Alt$(Jet_vtx3DSig[hJCidx[0]],0)'}

regWeightFilterJets = weights/MVA_BDT_REG_MyRegression.weights.xml regDictFilterJets = {"fathFilterJets_pt":"fathFilterJets_pt[0]","VHbb::evalJERBias(fathFilterJets_ptRaw,fathFilterJets_genPt,fathFilterJets_eta)":"VHbb::evalJERBias(fathFilterJets_ptRaw[0],fathFilterJets_genPt[0],fathFilterJets_eta[0])","rho25":"rho25","VHbb::evalEt(fathFilterJets_pt,fathFilterJets_eta,fathFilterJets_phi,fathFilterJets_e)":"VHbb::evalEt(fathFilterJets_pt[0],fathFilterJets_eta[0],fathFilterJets_phi[0],fathFilterJets_e[0])","VHbb::evalMt(fathFilterJets_pt,fathFilterJets_eta,fathFilterJets_phi,fathFilterJets_e)":"VHbb::evalMt(fathFilterJets_pt[0],fathFilterJets_eta[0],fathFilterJets_phi[0],fathFilterJets_e[0])","fathFilterJets_ptLeadTrack":"fathFilterJets_ptLeadTrack[0]","metPuppi_pt":"METet","VHbb::deltaPhi(met_phi,fathFilterJets_phi)":"VHbb::deltaPhi(met_phi,fathFilterJets_phi[0])"}
regVarsFilterJets = ["fathFilterJets_pt","VHbb::evalJERBias(fathFilterJets_ptRaw,fathFilterJets_genPt,fathFilterJets_eta)","rho25","VHbb::evalEt(fathFilterJets_pt,fathFilterJets_eta,fathFilterJets_phi,fathFilterJets_e)","VHbb::evalMt(fathFilterJets_pt,fathFilterJets_eta,fathFilterJets_phi,fathFilterJets_e)","fathFilterJets_ptLeadTrack","metPuppi_pt","VHbb::deltaPhi(met_phi,fathFilterJets_phi)"]

#Need this for the plotting
[VHbbNameSpace]
library=<!Directories|vhbbpath!>/interface/VHbbNameSpace_h.so
[BTagReshaping]
library=<!Directories|vhbbpath!>/interface/BTagReshaping_h.so
[BTagHFweights]
file=<!Directories|vhbbpath!>/python/weights/csv_rwt_fit_hf_76x_2016_02_08.root
[BTagLFweights]
file=<!Directories|vhbbpath!>/python/weights/csv_rwt_fit_lf_76x_2016_02_08.root

;;!! for the likelihood
[AngularLike]
backgrounds = ['Zbb','Zudsg','ttbar','ZZ']
yields = {'Zbb':584.8,'Zudsg':881.61,'ttbar':135.7,'ZZ':44.04,'Sig':5.13}


[Weights]

;;;;;;;;;;;
;Description
;;;;;;;;;;;
;FitCorrVpt: Vpt weight derived from simultenous fit in boosted topology. To be
;used in boosted only

bTagWeight = bTagWeightCMVAV2

; this expression contains all the weights applied to MC samples!

; default
;; NLO weights. Using DY_specialWeight instead of specialweights
;weightF: genWeight*puWeight*TTW[0]*FitCorr[0]*weight_SF_Lepton[0]*eTrigSFWeight_singleEle80[0]*muTrigSFWeight_singlemu[0]*DYw[0]*<!Weights|bTagWeight!>[0]*DY_specialWeight[0]

;;;;
;BOOST
;;;;

;;default
;weightF: genWeight*puWeight*TTW[0]*FitCorrVpt[0]*weight_SF_Lepton[0]*eTrigSFWeight_singleEle80[0]*muTrigSFWeight_singlemu[0]*DYw[0]*DY_specialWeight[0]

;;Adding the BTag per sample weight
weightF: genWeight*puWeight*TTW[0]*FitCorrVpt[0]*weight_SF_Lepton[0]*eTrigSFWeight_singleEle80[0]*muTrigSFWeight_singlemu[0]*DYw[0]*DY_specialWeight[0]*FitCorrBTag[0]

;;

;;no FitCorrVpt
;weightF: genWeight*puWeight*TTW[0]*weight_SF_Lepton[0]*eTrigSFWeight_singleEle80[0]*muTrigSFWeight_singlemu[0]*DYw[0]*DY_specialWeight[0]*FitCorrBTag[0]
;
;;;

;;no NLO weights
;weightF: genWeight*puWeight*TTW[0]*FitCorrVpt[0]*weight_SF_Lepton[0]*eTrigSFWeight_singleEle80[0]*muTrigSFWeight_singlemu[0]*EWKw[0]*DY_specialWeight[0]

;;
;To make Vpt fit: no FitCorr and no FitCorrBTag
;weightF: genWeight*puWeight*TTW[0]*weight_SF_Lepton[0]*eTrigSFWeight_singleEle80[0]*muTrigSFWeight_singlemu[0]*DYw[0]*DY_specialWeight[0]

;;With new FitCorr
;weightF: genWeight*puWeight*TTW[0]*FitCorrVpt[0]*weight_SF_Lepton[0]*eTrigSFWeight_singleEle80[0]*muTrigSFWeight_singlemu[0]*DYw[0]*DY_specialWeight[0]
;bottom variation
;weightF: genWeight*puWeight*TTW[0]*FitCorrVpt[1]*weight_SF_Lepton[0]*eTrigSFWeight_singleEle80[0]*muTrigSFWeight_singlemu[0]*DYw[0]*DY_specialWeight[0]
;;top variations
;weightF: genWeight*puWeight*TTW[0]*FitCorrVpt[2]*weight_SF_Lepton[0]*eTrigSFWeight_singleEle80[0]*muTrigSFWeight_singlemu[0]*DYw[0]*DY_specialWeight[0]

;no CorrBTag for training
;weightF: genWeight*puWeight*TTW[0]*FitCorr[0]*weight_SF_Lepton[0]*eTrigSFWeight_singleEle80[0]*muTrigSFWeight_singlemu[0]*DYw[0]*DY_specialWeight[0]

;;;;;;;;;;
;Other
;;;;;;;;;;

;;
;To make Vpt fit: no FitCorr and no FitCorrBTag
;weightF: genWeight*puWeight*TTW[0]*weight_SF_Lepton[0]*eTrigSFWeight_singleEle80[0]*muTrigSFWeight_singlemu[0]*DYw[0]*DY_specialWeight[0]

;;With new FitCorr
;weightF: genWeight*puWeight*TTW[0]*FitCorrVpt[0]*weight_SF_Lepton[0]*eTrigSFWeight_singleEle80[0]*muTrigSFWeight_singlemu[0]*DYw[0]*DY_specialWeight[0]
;bottom variation
;weightF: genWeight*puWeight*TTW[0]*FitCorrVpt[1]*weight_SF_Lepton[0]*eTrigSFWeight_singleEle80[0]*muTrigSFWeight_singlemu[0]*DYw[0]*DY_specialWeight[0]
;;top variations
;weightF: genWeight*puWeight*TTW[0]*FitCorrVpt[2]*weight_SF_Lepton[0]*eTrigSFWeight_singleEle80[0]*muTrigSFWeight_singlemu[0]*DYw[0]*DY_specialWeight[0]

;no CorrBTag for training
;weightF: genWeight*puWeight*TTW[0]*FitCorr[0]*weight_SF_Lepton[0]*eTrigSFWeight_singleEle80[0]*muTrigSFWeight_singlemu[0]*DYw[0]*DY_specialWeight[0]
; use the per sample defined special weight from config
;useSpecialWeight = True
useSpecialWeight = False 


;;;
;;Weight SYS New
;;;;

;muon weight
muon_eff_UP = <!Weights|weightF!>*((weight_SF_Lepton[2]*muTrigSFWeight_singlemu[2])/(weight_SF_Lepton[0]*eTrigSFWeight_singleEle80[0]*muTrigSFWeight_singlemu[0]))
muon_eff_DOWN = <!Weights|weightF!>*((weight_SF_Lepton[1]*muTrigSFWeight_singlemu[1])/(weight_SF_Lepton[0]*eTrigSFWeight_singleEle80[0]*muTrigSFWeight_singlemu[0]))

;pu systematic
weight_pileUp_UP = <!Weights|weightF!>*(puWeightUp/puWeight)
weight_pileUp_DOWN = <!Weights|weightF!>*(puWeightDown/puWeight)

;FitCorr
ptwweights_tt_UP=  <!Weights|weightF!>*(FitCorr[2]/FitCorr[0])
ptwweights_whf_UP= <!Weights|weightF!>*(FitCorr[2]/FitCorr[0])
ptwweights_wlf_UP= <!Weights|weightF!>*(FitCorr[2]/FitCorr[0])

ptwweights_tt_DOWN=  <!Weights|weightF!>*(FitCorr[1]/FitCorr[0])
ptwweights_whf_DOWN= <!Weights|weightF!>*(FitCorr[1]/FitCorr[0])
ptwweights_wlf_DOWN= <!Weights|weightF!>*(FitCorr[1]/FitCorr[0])

#;btag
weight_noBTag = (<!Weights|weightF!>/<!Weights|bTagWeight!>[0])

btagWeight_jes_pt0_eta1_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt0_eta1Up
btagWeight_jes_pt0_eta2_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt0_eta2Up
btagWeight_jes_pt0_eta3_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt0_eta3Up
btagWeight_jes_pt1_eta1_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt1_eta1Up
btagWeight_jes_pt1_eta2_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt1_eta2Up
btagWeight_jes_pt1_eta3_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt1_eta3Up
btagWeight_jes_pt2_eta1_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt2_eta1Up
btagWeight_jes_pt2_eta2_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt2_eta2Up
btagWeight_jes_pt2_eta3_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt2_eta3Up
btagWeight_jes_pt3_eta1_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt3_eta1Up
btagWeight_jes_pt3_eta2_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt3_eta2Up
btagWeight_jes_pt3_eta3_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt3_eta3Up
btagWeight_jes_pt4_eta1_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt4_eta1Up
btagWeight_jes_pt4_eta2_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt4_eta2Up
btagWeight_jes_pt4_eta3_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt4_eta3Up

btagWeight_lf_pt0_eta1_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt0_eta1Up
btagWeight_lf_pt0_eta2_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt0_eta2Up
btagWeight_lf_pt0_eta3_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt0_eta3Up
btagWeight_lf_pt1_eta1_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt1_eta1Up
btagWeight_lf_pt1_eta2_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt1_eta2Up
btagWeight_lf_pt1_eta3_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt1_eta3Up
btagWeight_lf_pt2_eta1_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt2_eta1Up
btagWeight_lf_pt2_eta2_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt2_eta2Up
btagWeight_lf_pt2_eta3_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt2_eta3Up
btagWeight_lf_pt3_eta1_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt3_eta1Up
btagWeight_lf_pt3_eta2_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt3_eta2Up
btagWeight_lf_pt3_eta3_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt3_eta3Up
btagWeight_lf_pt4_eta1_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt4_eta1Up
btagWeight_lf_pt4_eta2_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt4_eta2Up
btagWeight_lf_pt4_eta3_UP=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt4_eta3Up

btagWeight_hf_pt0_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt0_eta1Up
btagWeight_hf_pt0_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt0_eta2Up
btagWeight_hf_pt0_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt0_eta3Up
btagWeight_hf_pt1_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt1_eta1Up
btagWeight_hf_pt1_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt1_eta2Up
btagWeight_hf_pt1_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt1_eta3Up
btagWeight_hf_pt2_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt2_eta1Up
btagWeight_hf_pt2_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt2_eta2Up
btagWeight_hf_pt2_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt2_eta3Up
btagWeight_hf_pt3_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt3_eta1Up
btagWeight_hf_pt3_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt3_eta2Up
btagWeight_hf_pt3_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt3_eta3Up
btagWeight_hf_pt4_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt4_eta1Up
btagWeight_hf_pt4_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt4_eta2Up
btagWeight_hf_pt4_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt4_eta3Up

btagWeight_lfstats1_pt0_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt0_eta1Up
btagWeight_lfstats1_pt0_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt0_eta2Up
btagWeight_lfstats1_pt0_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt0_eta3Up
btagWeight_lfstats1_pt1_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt1_eta1Up
btagWeight_lfstats1_pt1_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt1_eta2Up
btagWeight_lfstats1_pt1_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt1_eta3Up
btagWeight_lfstats1_pt2_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt2_eta1Up
btagWeight_lfstats1_pt2_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt2_eta2Up
btagWeight_lfstats1_pt2_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt2_eta3Up
btagWeight_lfstats1_pt3_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt3_eta1Up
btagWeight_lfstats1_pt3_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt3_eta2Up
btagWeight_lfstats1_pt3_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt3_eta3Up
btagWeight_lfstats1_pt4_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt4_eta1Up
btagWeight_lfstats1_pt4_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt4_eta2Up
btagWeight_lfstats1_pt4_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt4_eta3Up

btagWeight_lfstats2_pt0_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt0_eta1Up
btagWeight_lfstats2_pt0_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt0_eta2Up
btagWeight_lfstats2_pt0_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt0_eta3Up
btagWeight_lfstats2_pt1_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt1_eta1Up
btagWeight_lfstats2_pt1_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt1_eta2Up
btagWeight_lfstats2_pt1_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt1_eta3Up
btagWeight_lfstats2_pt2_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt2_eta1Up
btagWeight_lfstats2_pt2_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt2_eta2Up
btagWeight_lfstats2_pt2_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt2_eta3Up
btagWeight_lfstats2_pt3_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt3_eta1Up
btagWeight_lfstats2_pt3_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt3_eta2Up
btagWeight_lfstats2_pt3_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt3_eta3Up
btagWeight_lfstats2_pt4_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt4_eta1Up
btagWeight_lfstats2_pt4_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt4_eta2Up
btagWeight_lfstats2_pt4_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt4_eta3Up

btagWeight_hfstats1_pt0_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt0_eta1Up
btagWeight_hfstats1_pt0_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt0_eta2Up
btagWeight_hfstats1_pt0_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt0_eta3Up
btagWeight_hfstats1_pt1_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt1_eta1Up
btagWeight_hfstats1_pt1_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt1_eta2Up
btagWeight_hfstats1_pt1_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt1_eta3Up
btagWeight_hfstats1_pt2_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt2_eta1Up
btagWeight_hfstats1_pt2_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt2_eta2Up
btagWeight_hfstats1_pt2_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt2_eta3Up
btagWeight_hfstats1_pt3_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt3_eta1Up
btagWeight_hfstats1_pt3_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt3_eta2Up
btagWeight_hfstats1_pt3_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt3_eta3Up
btagWeight_hfstats1_pt4_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt4_eta1Up
btagWeight_hfstats1_pt4_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt4_eta2Up
btagWeight_hfstats1_pt4_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt4_eta3Up

btagWeight_hfstats2_pt0_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt0_eta1Up
btagWeight_hfstats2_pt0_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt0_eta2Up
btagWeight_hfstats2_pt0_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt0_eta3Up
btagWeight_hfstats2_pt1_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt1_eta1Up
btagWeight_hfstats2_pt1_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt1_eta2Up
btagWeight_hfstats2_pt1_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt1_eta3Up
btagWeight_hfstats2_pt2_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt2_eta1Up
btagWeight_hfstats2_pt2_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt2_eta2Up
btagWeight_hfstats2_pt2_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt2_eta3Up
btagWeight_hfstats2_pt3_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt3_eta1Up
btagWeight_hfstats2_pt3_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt3_eta2Up
btagWeight_hfstats2_pt3_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt3_eta3Up
btagWeight_hfstats2_pt4_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt4_eta1Up
btagWeight_hfstats2_pt4_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt4_eta2Up
btagWeight_hfstats2_pt4_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt4_eta3Up

btagWeight_cerr1_pt0_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt0_eta1Up
btagWeight_cerr1_pt0_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt0_eta2Up
btagWeight_cerr1_pt0_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt0_eta3Up
btagWeight_cerr1_pt1_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt1_eta1Up
btagWeight_cerr1_pt1_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt1_eta2Up
btagWeight_cerr1_pt1_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt1_eta3Up
btagWeight_cerr1_pt2_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt2_eta1Up
btagWeight_cerr1_pt2_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt2_eta2Up
btagWeight_cerr1_pt2_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt2_eta3Up
btagWeight_cerr1_pt3_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt3_eta1Up
btagWeight_cerr1_pt3_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt3_eta2Up
btagWeight_cerr1_pt3_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt3_eta3Up
btagWeight_cerr1_pt4_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt4_eta1Up
btagWeight_cerr1_pt4_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt4_eta2Up
btagWeight_cerr1_pt4_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt4_eta3Up

btagWeight_cerr2_pt0_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt0_eta1Up
btagWeight_cerr2_pt0_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt0_eta2Up
btagWeight_cerr2_pt0_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt0_eta3Up
btagWeight_cerr2_pt1_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt1_eta1Up
btagWeight_cerr2_pt1_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt1_eta2Up
btagWeight_cerr2_pt1_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt1_eta3Up
btagWeight_cerr2_pt2_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt2_eta1Up
btagWeight_cerr2_pt2_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt2_eta2Up
btagWeight_cerr2_pt2_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt2_eta3Up
btagWeight_cerr2_pt3_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt3_eta1Up
btagWeight_cerr2_pt3_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt3_eta2Up
btagWeight_cerr2_pt3_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt3_eta3Up
btagWeight_cerr2_pt4_eta1_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt4_eta1Up
btagWeight_cerr2_pt4_eta2_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt4_eta2Up
btagWeight_cerr2_pt4_eta3_UP=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt4_eta3Up

;btag
btagWeight_jes_pt0_eta1_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt0_eta1Down
btagWeight_jes_pt0_eta2_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt0_eta2Down
btagWeight_jes_pt0_eta3_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt0_eta3Down
btagWeight_jes_pt1_eta1_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt1_eta1Down
btagWeight_jes_pt1_eta2_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt1_eta2Down
btagWeight_jes_pt1_eta3_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt1_eta3Down
btagWeight_jes_pt2_eta1_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt2_eta1Down
btagWeight_jes_pt2_eta2_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt2_eta2Down
btagWeight_jes_pt2_eta3_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt2_eta3Down
btagWeight_jes_pt3_eta1_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt3_eta1Down
btagWeight_jes_pt3_eta2_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt3_eta2Down
btagWeight_jes_pt3_eta3_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt3_eta3Down
btagWeight_jes_pt4_eta1_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt4_eta1Down
btagWeight_jes_pt4_eta2_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt4_eta2Down
btagWeight_jes_pt4_eta3_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_JES_pt4_eta3Down

btagWeight_lf_pt0_eta1_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt0_eta1Down
btagWeight_lf_pt0_eta2_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt0_eta2Down
btagWeight_lf_pt0_eta3_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt0_eta3Down
btagWeight_lf_pt1_eta1_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt1_eta1Down
btagWeight_lf_pt1_eta2_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt1_eta2Down
btagWeight_lf_pt1_eta3_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt1_eta3Down
btagWeight_lf_pt2_eta1_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt2_eta1Down
btagWeight_lf_pt2_eta2_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt2_eta2Down
btagWeight_lf_pt2_eta3_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt2_eta3Down
btagWeight_lf_pt3_eta1_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt3_eta1Down
btagWeight_lf_pt3_eta2_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt3_eta2Down
btagWeight_lf_pt3_eta3_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt3_eta3Down
btagWeight_lf_pt4_eta1_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt4_eta1Down
btagWeight_lf_pt4_eta2_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt4_eta2Down
btagWeight_lf_pt4_eta3_DOWN=    <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LF_pt4_eta3Down

btagWeight_hf_pt0_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt0_eta1Down
btagWeight_hf_pt0_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt0_eta2Down
btagWeight_hf_pt0_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt0_eta3Down
btagWeight_hf_pt1_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt1_eta1Down
btagWeight_hf_pt1_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt1_eta2Down
btagWeight_hf_pt1_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt1_eta3Down
btagWeight_hf_pt2_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt2_eta1Down
btagWeight_hf_pt2_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt2_eta2Down
btagWeight_hf_pt2_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt2_eta3Down
btagWeight_hf_pt3_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt3_eta1Down
btagWeight_hf_pt3_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt3_eta2Down
btagWeight_hf_pt3_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt3_eta3Down
btagWeight_hf_pt4_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt4_eta1Down
btagWeight_hf_pt4_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt4_eta2Down
btagWeight_hf_pt4_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HF_pt4_eta3Down

btagWeight_lfstats1_pt0_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt0_eta1Down
btagWeight_lfstats1_pt0_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt0_eta2Down
btagWeight_lfstats1_pt0_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt0_eta3Down
btagWeight_lfstats1_pt1_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt1_eta1Down
btagWeight_lfstats1_pt1_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt1_eta2Down
btagWeight_lfstats1_pt1_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt1_eta3Down
btagWeight_lfstats1_pt2_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt2_eta1Down
btagWeight_lfstats1_pt2_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt2_eta2Down
btagWeight_lfstats1_pt2_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt2_eta3Down
btagWeight_lfstats1_pt3_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt3_eta1Down
btagWeight_lfstats1_pt3_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt3_eta2Down
btagWeight_lfstats1_pt3_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt3_eta3Down
btagWeight_lfstats1_pt4_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt4_eta1Down
btagWeight_lfstats1_pt4_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt4_eta2Down
btagWeight_lfstats1_pt4_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats1_pt4_eta3Down

btagWeight_lfstats2_pt0_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt0_eta1Down
btagWeight_lfstats2_pt0_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt0_eta2Down
btagWeight_lfstats2_pt0_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt0_eta3Down
btagWeight_lfstats2_pt1_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt1_eta1Down
btagWeight_lfstats2_pt1_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt1_eta2Down
btagWeight_lfstats2_pt1_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt1_eta3Down
btagWeight_lfstats2_pt2_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt2_eta1Down
btagWeight_lfstats2_pt2_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt2_eta2Down
btagWeight_lfstats2_pt2_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt2_eta3Down
btagWeight_lfstats2_pt3_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt3_eta1Down
btagWeight_lfstats2_pt3_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt3_eta2Down
btagWeight_lfstats2_pt3_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt3_eta3Down
btagWeight_lfstats2_pt4_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt4_eta1Down
btagWeight_lfstats2_pt4_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt4_eta2Down
btagWeight_lfstats2_pt4_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_LFStats2_pt4_eta3Down

btagWeight_hfstats1_pt0_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt0_eta1Down
btagWeight_hfstats1_pt0_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt0_eta2Down
btagWeight_hfstats1_pt0_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt0_eta3Down
btagWeight_hfstats1_pt1_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt1_eta1Down
btagWeight_hfstats1_pt1_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt1_eta2Down
btagWeight_hfstats1_pt1_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt1_eta3Down
btagWeight_hfstats1_pt2_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt2_eta1Down
btagWeight_hfstats1_pt2_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt2_eta2Down
btagWeight_hfstats1_pt2_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt2_eta3Down
btagWeight_hfstats1_pt3_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt3_eta1Down
btagWeight_hfstats1_pt3_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt3_eta2Down
btagWeight_hfstats1_pt3_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt3_eta3Down
btagWeight_hfstats1_pt4_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt4_eta1Down
btagWeight_hfstats1_pt4_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt4_eta2Down
btagWeight_hfstats1_pt4_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats1_pt4_eta3Down

btagWeight_hfstats2_pt0_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt0_eta1Down
btagWeight_hfstats2_pt0_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt0_eta2Down
btagWeight_hfstats2_pt0_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt0_eta3Down
btagWeight_hfstats2_pt1_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt1_eta1Down
btagWeight_hfstats2_pt1_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt1_eta2Down
btagWeight_hfstats2_pt1_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt1_eta3Down
btagWeight_hfstats2_pt2_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt2_eta1Down
btagWeight_hfstats2_pt2_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt2_eta2Down
btagWeight_hfstats2_pt2_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt2_eta3Down
btagWeight_hfstats2_pt3_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt3_eta1Down
btagWeight_hfstats2_pt3_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt3_eta2Down
btagWeight_hfstats2_pt3_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt3_eta3Down
btagWeight_hfstats2_pt4_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt4_eta1Down
btagWeight_hfstats2_pt4_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt4_eta2Down
btagWeight_hfstats2_pt4_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_HFStats2_pt4_eta3Down

btagWeight_cerr1_pt0_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt0_eta1Down
btagWeight_cerr1_pt0_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt0_eta2Down
btagWeight_cerr1_pt0_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt0_eta3Down
btagWeight_cerr1_pt1_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt1_eta1Down
btagWeight_cerr1_pt1_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt1_eta2Down
btagWeight_cerr1_pt1_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt1_eta3Down
btagWeight_cerr1_pt2_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt2_eta1Down
btagWeight_cerr1_pt2_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt2_eta2Down
btagWeight_cerr1_pt2_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt2_eta3Down
btagWeight_cerr1_pt3_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt3_eta1Down
btagWeight_cerr1_pt3_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt3_eta2Down
btagWeight_cerr1_pt3_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt3_eta3Down
btagWeight_cerr1_pt4_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt4_eta1Down
btagWeight_cerr1_pt4_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt4_eta2Down
btagWeight_cerr1_pt4_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr1_pt4_eta3Down

btagWeight_cerr2_pt0_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt0_eta1Down
btagWeight_cerr2_pt0_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt0_eta2Down
btagWeight_cerr2_pt0_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt0_eta3Down
btagWeight_cerr2_pt1_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt1_eta1Down
btagWeight_cerr2_pt1_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt1_eta2Down
btagWeight_cerr2_pt1_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt1_eta3Down
btagWeight_cerr2_pt2_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt2_eta1Down
btagWeight_cerr2_pt2_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt2_eta2Down
btagWeight_cerr2_pt2_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt2_eta3Down
btagWeight_cerr2_pt3_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt3_eta1Down
btagWeight_cerr2_pt3_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt3_eta2Down
btagWeight_cerr2_pt3_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt3_eta3Down
btagWeight_cerr2_pt4_eta1_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt4_eta1Down
btagWeight_cerr2_pt4_eta2_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt4_eta2Down
btagWeight_cerr2_pt4_eta3_DOWN=   <!Weights|weight_noBTag!>*<!Weights|bTagWeight!>_cErr2_pt4_eta3Down


;b-tag weights


#;;;
#;Weight SYS OLD
#;;;
#
#;PU
#PileUp_UP= <!Weights|weight_noPU!>*puWeightUp
#PileUp_DOWN= <!Weights|weight_noPU!>*puWeightDown
#
;lhe scale
;CMS_vhbb_LHE_weights_scale_muR_ZH_UP=  <!Weights|weightF!>*LHE_weights_scale_wgt[2+2]
;CMS_vhbb_LHE_weights_scale_muR_WH_UP=  <!Weights|weightF!>*LHE_weights_scale_wgt[2+2]
;CMS_vhbb_LHE_weights_scale_muR_ggZH_UP=  <!Weights|weightF!>*LHE_weights_scale_wgt[2+2]
;CMS_vhbb_LHE_weights_scale_muR_TT_UP=  <!Weights|weightF!>*LHE_weights_scale_wgt[2+2]
;CMS_vhbb_LHE_weights_scale_muR_QCD_UP=  <!Weights|weightF!>*LHE_weights_scale_wgt[2+2]
;CMS_vhbb_LHE_weights_scale_muR_Zj0b_UP=  <!Weights|weightF!>*LHE_weights_scale_wgt[2+2]
;CMS_vhbb_LHE_weights_scale_muR_Zj1b_UP=  <!Weights|weightF!>*LHE_weights_scale_wgt[2+2]
;CMS_vhbb_LHE_weights_scale_muR_Zj2b_UP=  <!Weights|weightF!>*LHE_weights_scale_wgt[2+2]
;CMS_vhbb_LHE_weights_scale_muR_Wj0b_UP=  <!Weights|weightF!>*LHE_weights_scale_wgt[2+2]
;CMS_vhbb_LHE_weights_scale_muR_Wj1b_UP=  <!Weights|weightF!>*LHE_weights_scale_wgt[2+2]
;CMS_vhbb_LHE_weights_scale_muR_Wj2b_UP=  <!Weights|weightF!>*LHE_weights_scale_wgt[2+2]
;CMS_vhbb_LHE_weights_scale_muR_ZH_DOWN= <!Weights|weightF!>*LHE_weights_scale_wgt[3+2]
;CMS_vhbb_LHE_weights_scale_muR_WH_DOWN= <!Weights|weightF!>*LHE_weights_scale_wgt[3+2]
;CMS_vhbb_LHE_weights_scale_muR_ggZH_DOWN= <!Weights|weightF!>*LHE_weights_scale_wgt[3+2]
;CMS_vhbb_LHE_weights_scale_muR_TT_DOWN= <!Weights|weightF!>*LHE_weights_scale_wgt[3+2]
;CMS_vhbb_LHE_weights_scale_muR_QCD_DOWN= <!Weights|weightF!>*LHE_weights_scale_wgt[3+2]
;CMS_vhbb_LHE_weights_scale_muR_Zj0b_DOWN= <!Weights|weightF!>*LHE_weights_scale_wgt[3+2]
;CMS_vhbb_LHE_weights_scale_muR_Zj1b_DOWN= <!Weights|weightF!>*LHE_weights_scale_wgt[3+2]
;CMS_vhbb_LHE_weights_scale_muR_Zj2b_DOWN= <!Weights|weightF!>*LHE_weights_scale_wgt[3+2]
;CMS_vhbb_LHE_weights_scale_muR_Wj0b_DOWN=  <!Weights|weightF!>*LHE_weights_scale_wgt[3+2]
;CMS_vhbb_LHE_weights_scale_muR_Wj1b_DOWN=  <!Weights|weightF!>*LHE_weights_scale_wgt[3+2]
;CMS_vhbb_LHE_weights_scale_muR_Wj2b_DOWN=  <!Weights|weightF!>*LHE_weights_scale_wgt[3+2]
;
;
;CMS_vhbb_LHE_weights_scale_muF_ZH_UP= <!Weights|weightF!>*LHE_weights_scale_wgt[0+2]
;CMS_vhbb_LHE_weights_scale_muF_WH_UP= <!Weights|weightF!>*LHE_weights_scale_wgt[0+2]
;CMS_vhbb_LHE_weights_scale_muF_ggZH_UP= <!Weights|weightF!>*LHE_weights_scale_wgt[0+2]
;CMS_vhbb_LHE_weights_scale_muF_TT_UP= <!Weights|weightF!>*LHE_weights_scale_wgt[0+2]
;CMS_vhbb_LHE_weights_scale_muF_QCD_UP= <!Weights|weightF!>*LHE_weights_scale_wgt[0+2]
;CMS_vhbb_LHE_weights_scale_muF_Zj0b_UP= <!Weights|weightF!>*LHE_weights_scale_wgt[0+2]
;CMS_vhbb_LHE_weights_scale_muF_Zj1b_UP= <!Weights|weightF!>*LHE_weights_scale_wgt[0+2]
;CMS_vhbb_LHE_weights_scale_muF_Zj2b_UP= <!Weights|weightF!>*LHE_weights_scale_wgt[0+2]
;CMS_vhbb_LHE_weights_scale_muF_Wj0b_UP=  <!Weights|weightF!>*LHE_weights_scale_wgt[0+2]
;CMS_vhbb_LHE_weights_scale_muF_Wj1b_UP=  <!Weights|weightF!>*LHE_weights_scale_wgt[0+2]
;CMS_vhbb_LHE_weights_scale_muF_Wj2b_UP=  <!Weights|weightF!>*LHE_weights_scale_wgt[0+2]
;CMS_vhbb_LHE_weights_scale_muF_ZH_DOWN= <!Weights|weightF!>*LHE_weights_scale_wgt[1+2]
;CMS_vhbb_LHE_weights_scale_muF_WH_DOWN= <!Weights|weightF!>*LHE_weights_scale_wgt[1+2]
;CMS_vhbb_LHE_weights_scale_muF_ggZH_DOWN= <!Weights|weightF!>*LHE_weights_scale_wgt[1+2]
;CMS_vhbb_LHE_weights_scale_muF_TT_DOWN= <!Weights|weightF!>*LHE_weights_scale_wgt[1+2]
;CMS_vhbb_LHE_weights_scale_muF_QCD_DOWN= <!Weights|weightF!>*LHE_weights_scale_wgt[1+2]
;CMS_vhbb_LHE_weights_scale_muF_Zj0b_DOWN= <!Weights|weightF!>*LHE_weights_scale_wgt[1+2]
;CMS_vhbb_LHE_weights_scale_muF_Zj1b_DOWN= <!Weights|weightF!>*LHE_weights_scale_wgt[1+2]
;CMS_vhbb_LHE_weights_scale_muF_Zj2b_DOWN= <!Weights|weightF!>*LHE_weights_scale_wgt[1+2]
;CMS_vhbb_LHE_weights_scale_muF_Wj0b_DOWN=  <!Weights|weightF!>*LHE_weights_scale_wgt[1+2]
;CMS_vhbb_LHE_weights_scale_muF_Wj1b_DOWN=  <!Weights|weightF!>*LHE_weights_scale_wgt[1+2]
;CMS_vhbb_LHE_weights_scale_muF_Wj2b_DOWN=  <!Weights|weightF!>*LHE_weights_scale_wgt[1+2]

;LHEScale are not defined for some samples
LHEScale_muR_UP     = Alt$(LHEScaleWeight[7],1)
LHEScale_muR_DOWN   = Alt$(LHEScaleWeight[1],1)
LHEScale_muF_UP     = Alt$(LHEScaleWeight[5],1)
LHEScale_muF_DOWN   = Alt$(LHEScaleWeight[3],1)

CMS_vhbb_LHE_weights_scale_muR_ZH_UP:       <!Weights|weightF!>*<!Weights|LHEScale_muR_UP!>
CMS_vhbb_LHE_weights_scale_muR_WH_UP:       <!Weights|weightF!>*<!Weights|LHEScale_muR_UP!>
CMS_vhbb_LHE_weights_scale_muR_ggZH_UP:     <!Weights|weightF!>*<!Weights|LHEScale_muR_UP!>
CMS_vhbb_LHE_weights_scale_muR_TT_UP:       <!Weights|weightF!>*<!Weights|LHEScale_muR_UP!>
CMS_vhbb_LHE_weights_scale_muR_Zj0b_UP:     <!Weights|weightF!>*<!Weights|LHEScale_muR_UP!>
CMS_vhbb_LHE_weights_scale_muR_Zj1b_UP:     <!Weights|weightF!>*<!Weights|LHEScale_muR_UP!>
CMS_vhbb_LHE_weights_scale_muR_Zj2b_UP:     <!Weights|weightF!>*<!Weights|LHEScale_muR_UP!>
CMS_vhbb_LHE_weights_scale_muR_Wj0b_UP:     <!Weights|weightF!>*<!Weights|LHEScale_muR_UP!>
CMS_vhbb_LHE_weights_scale_muR_Wj1b_UP:     <!Weights|weightF!>*<!Weights|LHEScale_muR_UP!>
CMS_vhbb_LHE_weights_scale_muR_Wj2b_UP:     <!Weights|weightF!>*<!Weights|LHEScale_muR_UP!>
CMS_vhbb_LHE_weights_scale_muR_QCD_UP:      <!Weights|weightF!>*<!Weights|LHEScale_muR_UP!>
CMS_vhbb_LHE_weights_scale_muR_ZH_DOWN:     <!Weights|weightF!>*<!Weights|LHEScale_muR_DOWN!>
CMS_vhbb_LHE_weights_scale_muR_WH_DOWN:     <!Weights|weightF!>*<!Weights|LHEScale_muR_DOWN!>
CMS_vhbb_LHE_weights_scale_muR_ggZH_DOWN:   <!Weights|weightF!>*<!Weights|LHEScale_muR_DOWN!>
CMS_vhbb_LHE_weights_scale_muR_TT_DOWN:     <!Weights|weightF!>*<!Weights|LHEScale_muR_DOWN!>
CMS_vhbb_LHE_weights_scale_muR_Zj0b_DOWN:   <!Weights|weightF!>*<!Weights|LHEScale_muR_DOWN!>
CMS_vhbb_LHE_weights_scale_muR_Zj1b_DOWN:   <!Weights|weightF!>*<!Weights|LHEScale_muR_DOWN!>
CMS_vhbb_LHE_weights_scale_muR_Zj2b_DOWN:   <!Weights|weightF!>*<!Weights|LHEScale_muR_DOWN!>
CMS_vhbb_LHE_weights_scale_muR_Wj0b_DOWN:   <!Weights|weightF!>*<!Weights|LHEScale_muR_DOWN!>
CMS_vhbb_LHE_weights_scale_muR_Wj1b_DOWN:   <!Weights|weightF!>*<!Weights|LHEScale_muR_DOWN!>
CMS_vhbb_LHE_weights_scale_muR_Wj2b_DOWN:   <!Weights|weightF!>*<!Weights|LHEScale_muR_DOWN!>
CMS_vhbb_LHE_weights_scale_muR_QCD_DOWN:    <!Weights|weightF!>*<!Weights|LHEScale_muR_DOWN!>

CMS_vhbb_LHE_weights_scale_muF_ZH_UP:       <!Weights|weightF!>*<!Weights|LHEScale_muF_UP!>
CMS_vhbb_LHE_weights_scale_muF_WH_UP:       <!Weights|weightF!>*<!Weights|LHEScale_muF_UP!>
CMS_vhbb_LHE_weights_scale_muF_ggZH_UP:     <!Weights|weightF!>*<!Weights|LHEScale_muF_UP!>
CMS_vhbb_LHE_weights_scale_muF_TT_UP:       <!Weights|weightF!>*<!Weights|LHEScale_muF_UP!>
CMS_vhbb_LHE_weights_scale_muF_Zj0b_UP:     <!Weights|weightF!>*<!Weights|LHEScale_muF_UP!>
CMS_vhbb_LHE_weights_scale_muF_Zj1b_UP:     <!Weights|weightF!>*<!Weights|LHEScale_muF_UP!>
CMS_vhbb_LHE_weights_scale_muF_Zj2b_UP:     <!Weights|weightF!>*<!Weights|LHEScale_muF_UP!>
CMS_vhbb_LHE_weights_scale_muF_Wj0b_UP:     <!Weights|weightF!>*<!Weights|LHEScale_muF_UP!>
CMS_vhbb_LHE_weights_scale_muF_Wj1b_UP:     <!Weights|weightF!>*<!Weights|LHEScale_muF_UP!>
CMS_vhbb_LHE_weights_scale_muF_Wj2b_UP:     <!Weights|weightF!>*<!Weights|LHEScale_muF_UP!>
CMS_vhbb_LHE_weights_scale_muF_QCD_UP:      <!Weights|weightF!>*<!Weights|LHEScale_muF_UP!>
CMS_vhbb_LHE_weights_scale_muF_ZH_DOWN:     <!Weights|weightF!>*<!Weights|LHEScale_muF_DOWN!>
CMS_vhbb_LHE_weights_scale_muF_WH_DOWN:     <!Weights|weightF!>*<!Weights|LHEScale_muF_DOWN!>
CMS_vhbb_LHE_weights_scale_muF_ggZH_DOWN:   <!Weights|weightF!>*<!Weights|LHEScale_muF_DOWN!>
CMS_vhbb_LHE_weights_scale_muF_TT_DOWN:     <!Weights|weightF!>*<!Weights|LHEScale_muF_DOWN!>
CMS_vhbb_LHE_weights_scale_muF_Zj0b_DOWN:   <!Weights|weightF!>*<!Weights|LHEScale_muF_DOWN!>
CMS_vhbb_LHE_weights_scale_muF_Zj1b_DOWN:   <!Weights|weightF!>*<!Weights|LHEScale_muF_DOWN!>
CMS_vhbb_LHE_weights_scale_muF_Zj2b_DOWN:   <!Weights|weightF!>*<!Weights|LHEScale_muF_DOWN!>
CMS_vhbb_LHE_weights_scale_muF_Wj0b_DOWN:   <!Weights|weightF!>*<!Weights|LHEScale_muF_DOWN!>
CMS_vhbb_LHE_weights_scale_muF_Wj1b_DOWN:   <!Weights|weightF!>*<!Weights|LHEScale_muF_DOWN!>
CMS_vhbb_LHE_weights_scale_muF_Wj2b_DOWN:   <!Weights|weightF!>*<!Weights|LHEScale_muF_DOWN!>
CMS_vhbb_LHE_weights_scale_muF_QCD_DOWN:    <!Weights|weightF!>*<!Weights|LHEScale_muF_DOWN!>

#'homemade' weights

bbtagWeight_tt_UP:                          <!Weights|weightF!>*FitCorrBTag[2]/FitCorrBTag[0]
bbtagWeight_whf_UP:                         <!Weights|weightF!>*FitCorrBTag[2]/FitCorrBTag[0]
bbtagWeight_wlf_UP:                         <!Weights|weightF!>*FitCorrBTag[2]/FitCorrBTag[0]
bbtagWeight_vv_UP:                          <!Weights|weightF!>*FitCorrBTag[2]/FitCorrBTag[0]

bbtagWeight_tt_DOWN:                        <!Weights|weightF!>*FitCorrBTag[1]/FitCorrBTag[0]
bbtagWeight_whf_DOWN:                       <!Weights|weightF!>*FitCorrBTag[1]/FitCorrBTag[0]
bbtagWeight_wlf_DOWN:                       <!Weights|weightF!>*FitCorrBTag[1]/FitCorrBTag[0]
bbtagWeight_vv_DOWN:                        <!Weights|weightF!>*FitCorrBTag[1]/FitCorrBTag[0]

#tmp fix
bbtagSF_signal_UP:                          <!Weights|weightF!>*DoubleBM2Weight_Signal[2]/DoubleBM2Weight_Signal[0]
bbtagSF_signal_Down:                        <!Weights|weightF!>*DoubleBM2Weight_Signal[1]/DoubleBM2Weight_Signal[0]

ptwweights_boost_tt_UP:                     <!Weights|weightF!>*FitCorrVpt[2]/FitCorrVpt[0]
ptwweights_boost_whf_UP:                    <!Weights|weightF!>*FitCorrVpt[2]/FitCorrVpt[0]
ptwweights_boost_wlf_UP:                    <!Weights|weightF!>*FitCorrVpt[2]/FitCorrVpt[0]

ptwweights_boost_tt_DOWN:                   <!Weights|weightF!>*FitCorrVpt[1]/FitCorrVpt[0]
ptwweights_boost_whf_DOWN:                  <!Weights|weightF!>*FitCorrVpt[1]/FitCorrVpt[0]
ptwweights_boost_wlf_DOWN:                  <!Weights|weightF!>*FitCorrVpt[1]/FitCorrVpt[0]

weight_noLepSF = (<!Weights|weightF!>/(weight_SF_Lepton[0]*eTrigSFWeight_singleEle80[0]*muTrigSFWeight_singlemu[0]))

;;lepton SF
;CMS_vhbb_eff_e_Wln_13TeV_DOWN= <!Weights|weight_noLepSF!>*weight_SF_Lepton[1]*eTrigSFWeight_doubleEle80x[1]
;CMS_vhbb_eff_e_Wln_13TeV_UP= <!Weights|weight_noLepSF!>*weight_SF_Lepton[2]*eTrigSFWeight_doubleEle80x[2]
;CMS_vhbb_eff_m_Wln_13TeV_DOWN=  <!Weights|weight_noLepSF!>*weight_SF_Lepton[1]*muTrigSFWeight_doublemu[1]
;CMS_vhbb_eff_m_Wln_13TeV_UP=  <!Weights|weight_noLepSF!>*weight_SF_Lepton[2]*muTrigSFWeight_doublemu[2]

electron_eff_DOWN= <!Weights|weight_noLepSF!>*weight_SF_Lepton[1]*eTrigSFWeight_singleEle80[1]
electron_eff_UP= <!Weights|weight_noLepSF!>*weight_SF_Lepton[2]*eTrigSFWeight_singleEle80[2]
muon_eff_DOWN=  <!Weights|weight_noLepSF!>*weight_SF_Lepton[1]*muTrigSFWeight_singlemu[1]
muon_eff_UP=  <!Weights|weight_noLepSF!>*weight_SF_Lepton[2]*muTrigSFWeight_singlemu[2]

[Branches]
;branch that should always be kept in the Nutples
keep_branches = ['run', 'event', 'luminosityBlock', 'genWeight', 'puWeight', 'V_*', 'H_*', 'GenJet*', 'Jet*', 'LHE*', 'GenPart*', 'Ele*', 'Muo*', 'MET*', 'PV_*', 'Vtype','DY_specialWeight','TTW','FitCorr','weight_SF_Lepton','eTrigSFWeight_singleEle80','eTrigSFWeight_singleEle80','DYw','bTagWeightCMVAV2','EWKw', 'isData']

keep_branches_plot = ['EWKw','DYw','bTagWeight','bTagWeightCMVAV2_Moriond','DYw','eleweight','GenVbosons_pt','HCMVAV2_eta','HCMVAV2_mass','HCMVAV2_phi','HCMVAV2_pt','HCMVAV2_reg_eta','HCMVAV2_reg_mass','HCMVAV2_reg_phi','HCMVAV2_reg_pt','hJetCMVAV2_pt_reg_0','hJetCMVAV2_pt_reg_1','HVdPhi','Jet_btagCMVAV2','Jet_btagCSV','Jet_chHEF','Jet_corr','Jet_eta','Jet_id','Jet_leadTrackPt','Jet_leptonDeltaR','Jet_leptonPt','Jet_leptonPtRel','Jet_neEmEF','Jet_neHEF','Jet_phi','Jet_pt','Jet_puId','Jet_puId','Jet_vtxMass','Jet_vtxPt','lheHT','lheV_pt','met_phi','met_pt','muweight','nGenHiggsBoson','nGenTop','nGenVbosons','nPVs','puWeight','rho ','softActivityVH_HT','softActivityVH_njets10','softActivityVH_njets2','softActivityVH_njets5','ttCls','V_new_eta','V_new_mass','V_new_phi','V_new_pt','vLeptons_new_eta','vLeptons_new_phi','vLeptons_new_pt','vLeptons_new_relIso04','vLeptons_SF_IdCutLoose','vLeptons_SFweight_HLT','Vtype_new','VtypeSim','weight_SF_Lepton','genWeight','puWeight','bTagWeightCMVAV2_Moriond','TTW','DYw','weight_SF_Lepton','eTrigSFWeight_doubleEle80x','muTrigSFWeight_doublemu','DY_specialWeight','nGenVbosons','GenVbosons_pt','VtypeSim','nGenTop','nGenHiggsBoson','lheNb']

