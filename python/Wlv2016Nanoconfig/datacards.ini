#-------------------------------------------------
# Configure Datacards and Workspaces
#-------------------------------------------------

[LimitGeneral]

normalizeShapes = []

# BDT Rebinning (Set False for Mjj or control region fits.) 
rebin_active = True

# BDT Binning
# taken from HIG-044-16 AN
#BDTrange = 11,0.2,1
#BDToutname = BDT_Wlv

#equivalent of HIG-044-16 but with retrained bdt
BDTrange = 10,0.5,1
BDToutname = BDT_Wlv_v7.Nominal

#BDT for boosted analysis
BDTrange_BOOST 		= 15,-1,1
;BDToutname_BOOST 	= BDT_Wlv_BOOST.Nominal
;new
BDToutname_BOOST 	= BDT_Wlv_BOOSTFinal_wdB.Nominal
;BDToutname_BOOST 	= BDT_Wlv_BOOSTFinal_nodB.Nominal
BTagVar_BOOST		= FatJet_btagHbb[Hbb_fjidx]
BTagVarRange1_BOOST	= 10,0.8,1
BTagVarRange2_BOOST	= 10,-0.8,0.8

# Control Region Variables
BTagVarRange = 15,-1,1
BTagVar = Jet_btagCMVA[hJidxCMVA[1]] 


# BDT Fit Systematics
; added jec sys from HIG-044-018 dc
; note: 
; the one missing:
; CMS_vhbb_scale_j_TimePtEta_13TeV
; which corresponds to
; Jet_pt_jesTimePtEtaDown
; taken from dc in 
; /mnt/t3nfs01/data01/shome/gaperrin/VHbb/CMSSW_7_4_7/src/HiggsAnalysis/CombinedLimit/V24/VH_combo_7_12

sys_BOOST= [
    'jer',
    'jesAbsoluteStat',
    'jesAbsoluteScale',
#    'jesAbsoluteFlavMap',
    'jesAbsoluteMPFBias',
    'jesFragmentation',
    'jesSinglePionECAL',
    'jesSinglePionHCAL',
    'jesFlavorQCD',
    'jesRelativeJEREC1',
#    'jesRelativeJEREC2',
#    'jesRelativeJERHF',
    'jesRelativePtBB',
    'jesRelativePtEC1',
    'jesRelativePtEC2',
#    'jesRelativePtHF',
#    'jesRelativeBal',
    'jesRelativeFSR',
    'jesRelativeStatFSR',
    'jesRelativeStatEC',
#    'jesRelativeStatHF',
    'jesPileUpDataMC',
    'jesPileUpPtRef',
    'jesPileUpPtBB',
    'jesPileUpPtEC1',
    'jesPileUpPtEC2',
#    'jesPileUpPtHF',
#    'jesPileUpMuZero',
#    'jesPileUpEnvelope',
    'jmr',
    'jms']

sys_RESOLVED= [
    'jer',
    'jesAbsoluteStat',
    'jesAbsoluteScale',
#    'jesAbsoluteFlavMap',
    'jesAbsoluteMPFBias',
    'jesFragmentation',
    'jesSinglePionECAL',
    'jesSinglePionHCAL',
    'jesFlavorQCD',
    'jesRelativeJEREC1',
#    'jesRelativeJEREC2',
#    'jesRelativeJERHF',
    'jesRelativePtBB',
    'jesRelativePtEC1',
    'jesRelativePtEC2',
#    'jesRelativePtHF',
#    'jesRelativeBal',
    'jesRelativeFSR',
    'jesRelativeStatFSR',
    'jesRelativeStatEC',
#    'jesRelativeStatHF',
    'jesPileUpDataMC',
    'jesPileUpPtRef',
    'jesPileUpPtBB',
    'jesPileUpPtEC1',
    'jesPileUpPtEC2',
#    'jesPileUpPtHF',
#    'jesPileUpMuZero',
#    'jesPileUpEnvelope',
    ]
    

sys_cr = <!LimitGeneral|sys_<!General|Analysis!>!> 

#for test
;sys_cr = ['jesPileUpDataMC']

sys_BDT = <!LimitGeneral|sys_cr!>
sys_Mjj = <!LimitGeneral|sys_cr!>

weightF_BOOST= [
    'muon_eff',
    'electron_eff',
#PU
    'weight_pileUp',
#Do not use this one. Us the ptwweight derived in the boosted category
##fit weight
#    'ptwweights_tt',
#    'ptwweights_whf',
#    'ptwweights_wlf',
# scale
    'CMS_vhbb_LHE_weights_scale_muR_ZH',
    'CMS_vhbb_LHE_weights_scale_muF_ZH',
    'CMS_vhbb_LHE_weights_scale_muR_WH',
    'CMS_vhbb_LHE_weights_scale_muF_WH',
    'CMS_vhbb_LHE_weights_scale_muR_ggZH',
    'CMS_vhbb_LHE_weights_scale_muF_ggZH',
    'CMS_vhbb_LHE_weights_scale_muR_Zj0b',
    'CMS_vhbb_LHE_weights_scale_muF_Zj0b',
    'CMS_vhbb_LHE_weights_scale_muR_Zj1b',
    'CMS_vhbb_LHE_weights_scale_muF_Zj1b',
    'CMS_vhbb_LHE_weights_scale_muR_Zj2b',
    'CMS_vhbb_LHE_weights_scale_muF_Zj2b',
    'CMS_vhbb_LHE_weights_scale_muR_Wj0b',
    'CMS_vhbb_LHE_weights_scale_muF_Wj0b',
    'CMS_vhbb_LHE_weights_scale_muR_Wj1b',
    'CMS_vhbb_LHE_weights_scale_muF_Wj1b',
    'CMS_vhbb_LHE_weights_scale_muR_Wj2b',
    'CMS_vhbb_LHE_weights_scale_muF_Wj2b',
    'CMS_vhbb_LHE_weights_scale_muR_TT',
    'CMS_vhbb_LHE_weights_scale_muF_TT',
    'CMS_vhbb_LHE_weights_scale_muR_QCD',
    'CMS_vhbb_LHE_weights_scale_muF_QCD',
#add "homemade" sys
#linear reweighting of the doubleB
    'bbtagWeight_tt',
    'bbtagWeight_whf',
    'bbtagWeight_wlf',
    'bbtagWeight_vv',
#SF for the signal
    'bbtagSF_signal',
#pt weight derived in the boosted category
    'ptwweights_boost_tt',
    'ptwweights_boost_whf',
    'ptwweights_boost_wlf',
    ]

# no b-tag weight in boost analysis
#weighF_BOOST= []

#weighF_RESOLVED = [
## b-tag weights
#    'btagWeight_hfstats1_pt0_eta1',
#    'btagWeight_hfstats1_pt0_eta2',
#    'btagWeight_hfstats1_pt0_eta3',
#    'btagWeight_hfstats1_pt1_eta1',
#    'btagWeight_hfstats1_pt1_eta2',
#    'btagWeight_hfstats1_pt1_eta3',
#    'btagWeight_hfstats1_pt2_eta1',
#    'btagWeight_hfstats1_pt2_eta2',
#    'btagWeight_hfstats1_pt2_eta3',
#    'btagWeight_hfstats1_pt3_eta1',
#    'btagWeight_hfstats1_pt3_eta2',
#    'btagWeight_hfstats1_pt3_eta3',
#    'btagWeight_hfstats1_pt4_eta1',
#    'btagWeight_hfstats1_pt4_eta2',
#    'btagWeight_hfstats1_pt4_eta3',
##
#    'btagWeight_hfstats2_pt0_eta1',
#    'btagWeight_hfstats2_pt0_eta2',
#    'btagWeight_hfstats2_pt0_eta3',
#    'btagWeight_hfstats2_pt1_eta1',
#    'btagWeight_hfstats2_pt1_eta2',
#    'btagWeight_hfstats2_pt1_eta3',
#    'btagWeight_hfstats2_pt2_eta1',
#    'btagWeight_hfstats2_pt2_eta2',
#    'btagWeight_hfstats2_pt2_eta3',
#    'btagWeight_hfstats2_pt3_eta1',
#    'btagWeight_hfstats2_pt3_eta2',
#    'btagWeight_hfstats2_pt3_eta3',
#    'btagWeight_hfstats2_pt4_eta1',
#    'btagWeight_hfstats2_pt4_eta2',
#    'btagWeight_hfstats2_pt4_eta3',
##
#    'btagWeight_lfstats1_pt0_eta1',
#    'btagWeight_lfstats1_pt0_eta2',
#    'btagWeight_lfstats1_pt0_eta3',
#    'btagWeight_lfstats1_pt1_eta1',
#    'btagWeight_lfstats1_pt1_eta2',
#    'btagWeight_lfstats1_pt1_eta3',
#    'btagWeight_lfstats1_pt2_eta1',
#    'btagWeight_lfstats1_pt2_eta2',
#    'btagWeight_lfstats1_pt2_eta3',
#    'btagWeight_lfstats1_pt3_eta1',
#    'btagWeight_lfstats1_pt3_eta2',
#    'btagWeight_lfstats1_pt3_eta3',
#    'btagWeight_lfstats1_pt4_eta1',
#    'btagWeight_lfstats1_pt4_eta2',
#    'btagWeight_lfstats1_pt4_eta3',
##
#    'btagWeight_lfstats2_pt0_eta1',
#    'btagWeight_lfstats2_pt0_eta2',
#    'btagWeight_lfstats2_pt0_eta3',
#    'btagWeight_lfstats2_pt1_eta1',
#    'btagWeight_lfstats2_pt1_eta2',
#    'btagWeight_lfstats2_pt1_eta3',
#    'btagWeight_lfstats2_pt2_eta1',
#    'btagWeight_lfstats2_pt2_eta2',
#    'btagWeight_lfstats2_pt2_eta3',
#    'btagWeight_lfstats2_pt3_eta1',
#    'btagWeight_lfstats2_pt3_eta2',
#    'btagWeight_lfstats2_pt3_eta3',
#    'btagWeight_lfstats2_pt4_eta1',
#    'btagWeight_lfstats2_pt4_eta2',
#    'btagWeight_lfstats2_pt4_eta3',
##
#    'btagWeight_hf_pt0_eta1',
#    'btagWeight_hf_pt0_eta2',
#    'btagWeight_hf_pt0_eta3',
#    'btagWeight_hf_pt1_eta1',
#    'btagWeight_hf_pt1_eta2',
#    'btagWeight_hf_pt1_eta3',
#    'btagWeight_hf_pt2_eta1',
#    'btagWeight_hf_pt2_eta2',
#    'btagWeight_hf_pt2_eta3',
#    'btagWeight_hf_pt3_eta1',
#    'btagWeight_hf_pt3_eta2',
#    'btagWeight_hf_pt3_eta3',
#    'btagWeight_hf_pt4_eta1',
#    'btagWeight_hf_pt4_eta2',
#    'btagWeight_hf_pt4_eta3',
##
#    'btagWeight_jes_pt0_eta1',
#    'btagWeight_jes_pt0_eta2',
#    'btagWeight_jes_pt0_eta3',
#    'btagWeight_jes_pt1_eta1',
#    'btagWeight_jes_pt1_eta2',
#    'btagWeight_jes_pt1_eta3',
#    'btagWeight_jes_pt2_eta1',
#    'btagWeight_jes_pt2_eta2',
#    'btagWeight_jes_pt2_eta3',
#    'btagWeight_jes_pt3_eta1',
#    'btagWeight_jes_pt3_eta2',
#    'btagWeight_jes_pt3_eta3',
#    'btagWeight_jes_pt4_eta1',
#    'btagWeight_jes_pt4_eta2',
#    'btagWeight_jes_pt4_eta3',
##
#    'btagWeight_lf_pt0_eta1',
#    'btagWeight_lf_pt0_eta2',
#    'btagWeight_lf_pt0_eta3',
#    'btagWeight_lf_pt1_eta1',
#    'btagWeight_lf_pt1_eta2',
#    'btagWeight_lf_pt1_eta3',
#    'btagWeight_lf_pt2_eta1',
#    'btagWeight_lf_pt2_eta2',
#    'btagWeight_lf_pt2_eta3',
#    'btagWeight_lf_pt3_eta1',
#    'btagWeight_lf_pt3_eta2',
#    'btagWeight_lf_pt3_eta3',
#    'btagWeight_lf_pt4_eta1',
#    'btagWeight_lf_pt4_eta2',
#    'btagWeight_lf_pt4_eta3',
##
#    'btagWeight_cerr1_pt0_eta1',
#    'btagWeight_cerr1_pt0_eta2',
#    'btagWeight_cerr1_pt0_eta3',
#    'btagWeight_cerr1_pt1_eta1',
#    'btagWeight_cerr1_pt1_eta2',
#    'btagWeight_cerr1_pt1_eta3',
#    'btagWeight_cerr1_pt2_eta1',
#    'btagWeight_cerr1_pt2_eta2',
#    'btagWeight_cerr1_pt2_eta3',
#    'btagWeight_cerr1_pt3_eta1',
#    'btagWeight_cerr1_pt3_eta2',
#    'btagWeight_cerr1_pt3_eta3',
#    'btagWeight_cerr1_pt4_eta1',
#    'btagWeight_cerr1_pt4_eta2',
#    'btagWeight_cerr1_pt4_eta3',
##
#    'btagWeight_cerr2_pt0_eta1',
#    'btagWeight_cerr2_pt0_eta2',
#    'btagWeight_cerr2_pt0_eta3',
#    'btagWeight_cerr2_pt1_eta1',
#    'btagWeight_cerr2_pt1_eta2',
#    'btagWeight_cerr2_pt1_eta3',
#    'btagWeight_cerr2_pt2_eta1',
#    'btagWeight_cerr2_pt2_eta2',
#    'btagWeight_cerr2_pt2_eta3',
#    'btagWeight_cerr2_pt3_eta1',
#    'btagWeight_cerr2_pt3_eta2',
#    'btagWeight_cerr2_pt3_eta3',
#    'btagWeight_cerr2_pt4_eta1',
#    'btagWeight_cerr2_pt4_eta2',
#    'btagWeight_cerr2_pt4_eta3']


weightF_RESOLVED = [
#lepton SF
    'muon_eff',
    'electron_eff',
#PU
    'weight_pileUp',
#fit weight
    'ptwweights_tt',
    'ptwweights_whf',
    'ptwweights_wlf',
# b-tag weights
    'btagWeight_hfstats1_pt0_eta1',
    'btagWeight_hfstats1_pt0_eta2',
    'btagWeight_hfstats1_pt0_eta3',
    'btagWeight_hfstats1_pt1_eta1',
    'btagWeight_hfstats1_pt1_eta2',
    'btagWeight_hfstats1_pt1_eta3',
    'btagWeight_hfstats1_pt2_eta1',
    'btagWeight_hfstats1_pt2_eta2',
    'btagWeight_hfstats1_pt2_eta3',
    'btagWeight_hfstats1_pt3_eta1',
    'btagWeight_hfstats1_pt3_eta2',
    'btagWeight_hfstats1_pt3_eta3',
    'btagWeight_hfstats1_pt4_eta1',
    'btagWeight_hfstats1_pt4_eta2',
    'btagWeight_hfstats1_pt4_eta3',
#
    'btagWeight_hfstats2_pt0_eta1',
    'btagWeight_hfstats2_pt0_eta2',
    'btagWeight_hfstats2_pt0_eta3',
    'btagWeight_hfstats2_pt1_eta1',
    'btagWeight_hfstats2_pt1_eta2',
    'btagWeight_hfstats2_pt1_eta3',
    'btagWeight_hfstats2_pt2_eta1',
    'btagWeight_hfstats2_pt2_eta2',
    'btagWeight_hfstats2_pt2_eta3',
    'btagWeight_hfstats2_pt3_eta1',
    'btagWeight_hfstats2_pt3_eta2',
    'btagWeight_hfstats2_pt3_eta3',
    'btagWeight_hfstats2_pt4_eta1',
    'btagWeight_hfstats2_pt4_eta2',
    'btagWeight_hfstats2_pt4_eta3',
#
    'btagWeight_lfstats1_pt0_eta1',
    'btagWeight_lfstats1_pt0_eta2',
    'btagWeight_lfstats1_pt0_eta3',
    'btagWeight_lfstats1_pt1_eta1',
    'btagWeight_lfstats1_pt1_eta2',
    'btagWeight_lfstats1_pt1_eta3',
    'btagWeight_lfstats1_pt2_eta1',
    'btagWeight_lfstats1_pt2_eta2',
    'btagWeight_lfstats1_pt2_eta3',
    'btagWeight_lfstats1_pt3_eta1',
    'btagWeight_lfstats1_pt3_eta2',
    'btagWeight_lfstats1_pt3_eta3',
    'btagWeight_lfstats1_pt4_eta1',
    'btagWeight_lfstats1_pt4_eta2',
    'btagWeight_lfstats1_pt4_eta3',
#
    'btagWeight_lfstats2_pt0_eta1',
    'btagWeight_lfstats2_pt0_eta2',
    'btagWeight_lfstats2_pt0_eta3',
    'btagWeight_lfstats2_pt1_eta1',
    'btagWeight_lfstats2_pt1_eta2',
    'btagWeight_lfstats2_pt1_eta3',
    'btagWeight_lfstats2_pt2_eta1',
    'btagWeight_lfstats2_pt2_eta2',
    'btagWeight_lfstats2_pt2_eta3',
    'btagWeight_lfstats2_pt3_eta1',
    'btagWeight_lfstats2_pt3_eta2',
    'btagWeight_lfstats2_pt3_eta3',
    'btagWeight_lfstats2_pt4_eta1',
    'btagWeight_lfstats2_pt4_eta2',
    'btagWeight_lfstats2_pt4_eta3',
#
    'btagWeight_hf_pt0_eta1',
    'btagWeight_hf_pt0_eta2',
    'btagWeight_hf_pt0_eta3',
    'btagWeight_hf_pt1_eta1',
    'btagWeight_hf_pt1_eta2',
    'btagWeight_hf_pt1_eta3',
    'btagWeight_hf_pt2_eta1',
    'btagWeight_hf_pt2_eta2',
    'btagWeight_hf_pt2_eta3',
    'btagWeight_hf_pt3_eta1',
    'btagWeight_hf_pt3_eta2',
    'btagWeight_hf_pt3_eta3',
    'btagWeight_hf_pt4_eta1',
    'btagWeight_hf_pt4_eta2',
    'btagWeight_hf_pt4_eta3',
#
    'btagWeight_jes_pt0_eta1',
    'btagWeight_jes_pt0_eta2',
    'btagWeight_jes_pt0_eta3',
    'btagWeight_jes_pt1_eta1',
    'btagWeight_jes_pt1_eta2',
    'btagWeight_jes_pt1_eta3',
    'btagWeight_jes_pt2_eta1',
    'btagWeight_jes_pt2_eta2',
    'btagWeight_jes_pt2_eta3',
    'btagWeight_jes_pt3_eta1',
    'btagWeight_jes_pt3_eta2',
    'btagWeight_jes_pt3_eta3',
    'btagWeight_jes_pt4_eta1',
    'btagWeight_jes_pt4_eta2',
    'btagWeight_jes_pt4_eta3',
#
    'btagWeight_lf_pt0_eta1',
    'btagWeight_lf_pt0_eta2',
    'btagWeight_lf_pt0_eta3',
    'btagWeight_lf_pt1_eta1',
    'btagWeight_lf_pt1_eta2',
    'btagWeight_lf_pt1_eta3',
    'btagWeight_lf_pt2_eta1',
    'btagWeight_lf_pt2_eta2',
    'btagWeight_lf_pt2_eta3',
    'btagWeight_lf_pt3_eta1',
    'btagWeight_lf_pt3_eta2',
    'btagWeight_lf_pt3_eta3',
    'btagWeight_lf_pt4_eta1',
    'btagWeight_lf_pt4_eta2',
    'btagWeight_lf_pt4_eta3',
#
    'btagWeight_cerr1_pt0_eta1',
    'btagWeight_cerr1_pt0_eta2',
    'btagWeight_cerr1_pt0_eta3',
    'btagWeight_cerr1_pt1_eta1',
    'btagWeight_cerr1_pt1_eta2',
    'btagWeight_cerr1_pt1_eta3',
    'btagWeight_cerr1_pt2_eta1',
    'btagWeight_cerr1_pt2_eta2',
    'btagWeight_cerr1_pt2_eta3',
    'btagWeight_cerr1_pt3_eta1',
    'btagWeight_cerr1_pt3_eta2',
    'btagWeight_cerr1_pt3_eta3',
    'btagWeight_cerr1_pt4_eta1',
    'btagWeight_cerr1_pt4_eta2',
    'btagWeight_cerr1_pt4_eta3',
#
    'btagWeight_cerr2_pt0_eta1',
    'btagWeight_cerr2_pt0_eta2',
    'btagWeight_cerr2_pt0_eta3',
    'btagWeight_cerr2_pt1_eta1',
    'btagWeight_cerr2_pt1_eta2',
    'btagWeight_cerr2_pt1_eta3',
    'btagWeight_cerr2_pt2_eta1',
    'btagWeight_cerr2_pt2_eta2',
    'btagWeight_cerr2_pt2_eta3',
    'btagWeight_cerr2_pt3_eta1',
    'btagWeight_cerr2_pt3_eta2',
    'btagWeight_cerr2_pt3_eta3',
    'btagWeight_cerr2_pt4_eta1',
    'btagWeight_cerr2_pt4_eta2',
    'btagWeight_cerr2_pt4_eta3',

# scale
    'CMS_vhbb_LHE_weights_scale_muR_ZH',
    'CMS_vhbb_LHE_weights_scale_muF_ZH',
    'CMS_vhbb_LHE_weights_scale_muR_WH',
    'CMS_vhbb_LHE_weights_scale_muF_WH',
    'CMS_vhbb_LHE_weights_scale_muR_ggZH',
    'CMS_vhbb_LHE_weights_scale_muF_ggZH',
    'CMS_vhbb_LHE_weights_scale_muR_Zj0b',
    'CMS_vhbb_LHE_weights_scale_muF_Zj0b',
    'CMS_vhbb_LHE_weights_scale_muR_Zj1b',
    'CMS_vhbb_LHE_weights_scale_muF_Zj1b',
    'CMS_vhbb_LHE_weights_scale_muR_Zj2b',
    'CMS_vhbb_LHE_weights_scale_muF_Zj2b',
    'CMS_vhbb_LHE_weights_scale_muR_Wj0b',
    'CMS_vhbb_LHE_weights_scale_muF_Wj0b',
    'CMS_vhbb_LHE_weights_scale_muR_Wj1b',
    'CMS_vhbb_LHE_weights_scale_muF_Wj1b',
    'CMS_vhbb_LHE_weights_scale_muR_Wj2b',
    'CMS_vhbb_LHE_weights_scale_muF_Wj2b',
    'CMS_vhbb_LHE_weights_scale_muR_TT',
    'CMS_vhbb_LHE_weights_scale_muF_TT',
    'CMS_vhbb_LHE_weights_scale_muR_QCD',
    'CMS_vhbb_LHE_weights_scale_muF_QCD',
    ]

weightF_sys = <!LimitGeneral|weightF_<!General|Analysis!>!> 

useMinmaxCuts = True 

# Systematics Configuration
sys_factor = {
    'weight_pileUp':1.0,
    'jer':1.0,
    'jesAbsoluteStat':1.0,
    'jesAbsoluteScale':1.0,
#    'jesAbsoluteFlavMap':1.0,
    'jesAbsoluteMPFBias':1.0,
    'jesFragmentation':1.0,
    'jesSinglePionECAL':1.0,
    'jesSinglePionHCAL':1.0,
    'jesFlavorQCD':1.0,
    'jesRelativeJEREC1':1.0,
#    'jesRelativeJEREC2':1.0,
#    'jesRelativeJERHF':1.0,
    'jesRelativePtBB':1.0,
    'jesRelativePtEC1':1.0,
    'jesRelativePtEC2':1.0,
#    'jesRelativePtHF':1.0,
#    'jesRelativeBal':1.0,
    'jesRelativeFSR':1.0,
    'jesRelativeStatFSR':1.0,
    'jesRelativeStatEC':1.0,
#    'jesRelativeStatHF':1.0,
    'jesPileUpDataMC':1.0,
    'jesPileUpPtRef':1.0,
    'jesPileUpPtBB':1.0,
    'jesPileUpPtEC1':1.0,
    'jesPileUpPtEC2':1.0,
#    'jesPileUpPtHF':1.0,
#    'jesPileUpMuZero':1.0,
#    'jesPileUpEnvelope':1.0,
    'jms':1.0,
    'jmr':1.0,
#
#lepton SF
    'muon_eff':1.0,
    'electron_eff':1.0,
#fit weight
    'ptwweights_tt':1.0,
    'ptwweights_whf':1.0,
    'ptwweights_wlf':1.0,
# b-tag systematics
    'btagWeight_hfstats1_pt0_eta1':1.0,
    'btagWeight_hfstats1_pt0_eta2':1.0,
    'btagWeight_hfstats1_pt0_eta3':1.0,
    'btagWeight_hfstats1_pt1_eta1':1.0,
    'btagWeight_hfstats1_pt1_eta2':1.0,
    'btagWeight_hfstats1_pt1_eta3':1.0,
    'btagWeight_hfstats1_pt2_eta1':1.0,
    'btagWeight_hfstats1_pt2_eta2':1.0,
    'btagWeight_hfstats1_pt2_eta3':1.0,
    'btagWeight_hfstats1_pt3_eta1':1.0,
    'btagWeight_hfstats1_pt3_eta2':1.0,
    'btagWeight_hfstats1_pt3_eta3':1.0,
    'btagWeight_hfstats1_pt4_eta1':1.0,
    'btagWeight_hfstats1_pt4_eta2':1.0,
    'btagWeight_hfstats1_pt4_eta3':1.0,
#
    'btagWeight_hfstats2_pt0_eta1':1.0,
    'btagWeight_hfstats2_pt0_eta2':1.0,
    'btagWeight_hfstats2_pt0_eta3':1.0,
    'btagWeight_hfstats2_pt1_eta1':1.0,
    'btagWeight_hfstats2_pt1_eta2':1.0,
    'btagWeight_hfstats2_pt1_eta3':1.0,
    'btagWeight_hfstats2_pt2_eta1':1.0,
    'btagWeight_hfstats2_pt2_eta2':1.0,
    'btagWeight_hfstats2_pt2_eta3':1.0,
    'btagWeight_hfstats2_pt3_eta1':1.0,
    'btagWeight_hfstats2_pt3_eta2':1.0,
    'btagWeight_hfstats2_pt3_eta3':1.0,
    'btagWeight_hfstats2_pt4_eta1':1.0,
    'btagWeight_hfstats2_pt4_eta2':1.0,
    'btagWeight_hfstats2_pt4_eta3':1.0,
#
    'btagWeight_lfstats1_pt0_eta1':1.0,
    'btagWeight_lfstats1_pt0_eta2':1.0,
    'btagWeight_lfstats1_pt0_eta3':1.0,
    'btagWeight_lfstats1_pt1_eta1':1.0,
    'btagWeight_lfstats1_pt1_eta2':1.0,
    'btagWeight_lfstats1_pt1_eta3':1.0,
    'btagWeight_lfstats1_pt2_eta1':1.0,
    'btagWeight_lfstats1_pt2_eta2':1.0,
    'btagWeight_lfstats1_pt2_eta3':1.0,
    'btagWeight_lfstats1_pt3_eta1':1.0,
    'btagWeight_lfstats1_pt3_eta2':1.0,
    'btagWeight_lfstats1_pt3_eta3':1.0,
    'btagWeight_lfstats1_pt4_eta1':1.0,
    'btagWeight_lfstats1_pt4_eta2':1.0,
    'btagWeight_lfstats1_pt4_eta3':1.0,
#
    'btagWeight_lfstats2_pt0_eta1':1.0,
    'btagWeight_lfstats2_pt0_eta2':1.0,
    'btagWeight_lfstats2_pt0_eta3':1.0,
    'btagWeight_lfstats2_pt1_eta1':1.0,
    'btagWeight_lfstats2_pt1_eta2':1.0,
    'btagWeight_lfstats2_pt1_eta3':1.0,
    'btagWeight_lfstats2_pt2_eta1':1.0,
    'btagWeight_lfstats2_pt2_eta2':1.0,
    'btagWeight_lfstats2_pt2_eta3':1.0,
    'btagWeight_lfstats2_pt3_eta1':1.0,
    'btagWeight_lfstats2_pt3_eta2':1.0,
    'btagWeight_lfstats2_pt3_eta3':1.0,
    'btagWeight_lfstats2_pt4_eta1':1.0,
    'btagWeight_lfstats2_pt4_eta2':1.0,
    'btagWeight_lfstats2_pt4_eta3':1.0,
#
    'btagWeight_hf_pt0_eta1':1.0,
    'btagWeight_hf_pt0_eta2':1.0,
    'btagWeight_hf_pt0_eta3':1.0,
    'btagWeight_hf_pt1_eta1':1.0,
    'btagWeight_hf_pt1_eta2':1.0,
    'btagWeight_hf_pt1_eta3':1.0,
    'btagWeight_hf_pt2_eta1':1.0,
    'btagWeight_hf_pt2_eta2':1.0,
    'btagWeight_hf_pt2_eta3':1.0,
    'btagWeight_hf_pt3_eta1':1.0,
    'btagWeight_hf_pt3_eta2':1.0,
    'btagWeight_hf_pt3_eta3':1.0,
    'btagWeight_hf_pt4_eta1':1.0,
    'btagWeight_hf_pt4_eta2':1.0,
    'btagWeight_hf_pt4_eta3':1.0,
#
    'btagWeight_jes_pt0_eta1':1.0,
    'btagWeight_jes_pt0_eta2':1.0,
    'btagWeight_jes_pt0_eta3':1.0,
    'btagWeight_jes_pt1_eta1':1.0,
    'btagWeight_jes_pt1_eta2':1.0,
    'btagWeight_jes_pt1_eta3':1.0,
    'btagWeight_jes_pt2_eta1':1.0,
    'btagWeight_jes_pt2_eta2':1.0,
    'btagWeight_jes_pt2_eta3':1.0,
    'btagWeight_jes_pt3_eta1':1.0,
    'btagWeight_jes_pt3_eta2':1.0,
    'btagWeight_jes_pt3_eta3':1.0,
    'btagWeight_jes_pt4_eta1':1.0,
    'btagWeight_jes_pt4_eta2':1.0,
    'btagWeight_jes_pt4_eta3':1.0,
##
#    'btagWeight_lfstats1_pt0_eta1':1.0,
#    'btagWeight_lfstats1_pt0_eta2':1.0,
#    'btagWeight_lfstats1_pt0_eta3':1.0,
#    'btagWeight_lfstats1_pt1_eta1':1.0,
#    'btagWeight_lfstats1_pt1_eta2':1.0,
#    'btagWeight_lfstats1_pt1_eta3':1.0,
#    'btagWeight_lfstats1_pt2_eta1':1.0,
#    'btagWeight_lfstats1_pt2_eta2':1.0,
#    'btagWeight_lfstats1_pt2_eta3':1.0,
#    'btagWeight_lfstats1_pt3_eta1':1.0,
#    'btagWeight_lfstats1_pt3_eta2':1.0,
#    'btagWeight_lfstats1_pt3_eta3':1.0,
#    'btagWeight_lfstats1_pt4_eta1':1.0,
#    'btagWeight_lfstats1_pt4_eta2':1.0,
#    'btagWeight_lfstats1_pt4_eta3':1.0,
##
#    'btagWeight_lfstats2_pt0_eta1':1.0,
#    'btagWeight_lfstats2_pt0_eta2':1.0,
#    'btagWeight_lfstats2_pt0_eta3':1.0,
#    'btagWeight_lfstats2_pt1_eta1':1.0,
#    'btagWeight_lfstats2_pt1_eta2':1.0,
#    'btagWeight_lfstats2_pt1_eta3':1.0,
#    'btagWeight_lfstats2_pt2_eta1':1.0,
#    'btagWeight_lfstats2_pt2_eta2':1.0,
#    'btagWeight_lfstats2_pt2_eta3':1.0,
#    'btagWeight_lfstats2_pt3_eta1':1.0,
#    'btagWeight_lfstats2_pt3_eta2':1.0,
#    'btagWeight_lfstats2_pt3_eta3':1.0,
#    'btagWeight_lfstats2_pt4_eta1':1.0,
#    'btagWeight_lfstats2_pt4_eta2':1.0,
#    'btagWeight_lfstats2_pt4_eta3':1.0,
#
    'btagWeight_lf_pt0_eta1':1.0,
    'btagWeight_lf_pt0_eta2':1.0,
    'btagWeight_lf_pt0_eta3':1.0,
    'btagWeight_lf_pt1_eta1':1.0,
    'btagWeight_lf_pt1_eta2':1.0,
    'btagWeight_lf_pt1_eta3':1.0,
    'btagWeight_lf_pt2_eta1':1.0,
    'btagWeight_lf_pt2_eta2':1.0,
    'btagWeight_lf_pt2_eta3':1.0,
    'btagWeight_lf_pt3_eta1':1.0,
    'btagWeight_lf_pt3_eta2':1.0,
    'btagWeight_lf_pt3_eta3':1.0,
    'btagWeight_lf_pt4_eta1':1.0,
    'btagWeight_lf_pt4_eta2':1.0,
    'btagWeight_lf_pt4_eta3':1.0,
#
    'btagWeight_cerr1_pt0_eta1':1.0,
    'btagWeight_cerr1_pt0_eta2':1.0,
    'btagWeight_cerr1_pt0_eta3':1.0,
    'btagWeight_cerr1_pt1_eta1':1.0,
    'btagWeight_cerr1_pt1_eta2':1.0,
    'btagWeight_cerr1_pt1_eta3':1.0,
    'btagWeight_cerr1_pt2_eta1':1.0,
    'btagWeight_cerr1_pt2_eta2':1.0,
    'btagWeight_cerr1_pt2_eta3':1.0,
    'btagWeight_cerr1_pt3_eta1':1.0,
    'btagWeight_cerr1_pt3_eta2':1.0,
    'btagWeight_cerr1_pt3_eta3':1.0,
    'btagWeight_cerr1_pt4_eta1':1.0,
    'btagWeight_cerr1_pt4_eta2':1.0,
    'btagWeight_cerr1_pt4_eta3':1.0,
#
    'btagWeight_cerr2_pt0_eta1':1.0,
    'btagWeight_cerr2_pt0_eta2':1.0,
    'btagWeight_cerr2_pt0_eta3':1.0,
    'btagWeight_cerr2_pt1_eta1':1.0,
    'btagWeight_cerr2_pt1_eta2':1.0,
    'btagWeight_cerr2_pt1_eta3':1.0,
    'btagWeight_cerr2_pt2_eta1':1.0,
    'btagWeight_cerr2_pt2_eta2':1.0,
    'btagWeight_cerr2_pt2_eta3':1.0,
    'btagWeight_cerr2_pt3_eta1':1.0,
    'btagWeight_cerr2_pt3_eta2':1.0,
    'btagWeight_cerr2_pt3_eta3':1.0,
    'btagWeight_cerr2_pt4_eta1':1.0,
    'btagWeight_cerr2_pt4_eta2':1.0,
    'btagWeight_cerr2_pt4_eta3':1.0,
#
	'CMS_vhbb_LHE_weights_scale_muR_ZH': 1.0,
	'CMS_vhbb_LHE_weights_scale_muF_ZH': 1.0,
	'CMS_vhbb_LHE_weights_scale_muR_WH': 1.0,
	'CMS_vhbb_LHE_weights_scale_muF_WH': 1.0,
	'CMS_vhbb_LHE_weights_scale_muR_ggZH': 1.0,
	'CMS_vhbb_LHE_weights_scale_muF_ggZH': 1.0,
	'CMS_vhbb_LHE_weights_scale_muR_Zj0b': 1.0,
	'CMS_vhbb_LHE_weights_scale_muF_Zj0b': 1.0,
	'CMS_vhbb_LHE_weights_scale_muR_Zj1b': 1.0,
	'CMS_vhbb_LHE_weights_scale_muF_Zj1b': 1.0,
	'CMS_vhbb_LHE_weights_scale_muR_Zj2b': 1.0,
	'CMS_vhbb_LHE_weights_scale_muF_Zj2b': 1.0,
	'CMS_vhbb_LHE_weights_scale_muR_Wj0b': 1.0,
	'CMS_vhbb_LHE_weights_scale_muF_Wj0b': 1.0,
	'CMS_vhbb_LHE_weights_scale_muR_Wj1b': 1.0,
	'CMS_vhbb_LHE_weights_scale_muF_Wj1b': 1.0,
	'CMS_vhbb_LHE_weights_scale_muR_Wj2b': 1.0,
	'CMS_vhbb_LHE_weights_scale_muF_Wj2b': 1.0,
	'CMS_vhbb_LHE_weights_scale_muR_TT': 1.0,
	'CMS_vhbb_LHE_weights_scale_muF_TT': 1.0,
	'CMS_vhbb_LHE_weights_scale_muR_QCD': 1.0,
	'CMS_vhbb_LHE_weights_scale_muF_QCD': 1.0,
# "homemade corrections"
  'bbtagWeight_tt' : 1.0,
  'bbtagWeight_whf' : 1.0,
  'bbtagWeight_wlf' : 1.0,
  'bbtagWeight_vv' : 1.0,
  'bbtagSF_signal': 1.0,
  'ptwweights_boost_tt' : 1.0,
  'ptwweights_boost_whf': 1.0,
  'ptwweights_boost_wlf': 1.0,
    }

sys_affecting = {}

# Naming of Systematics
systematicsnaming = {
    'jer': 'CMS_vhbb_res_j_13TeV',
    'jesAbsoluteStat': 'CMS_vhbb_scale_j_AbsoluteStat_13TeV',
    'jesAbsoluteScale': 'CMS_vhbb_scale_j_AbsoluteScale_13TeV',
#    'jesAbsoluteFlavMap',
    'jesAbsoluteMPFBias': 'CMS_vhbb_scale_j_AbsoluteMPFBias_13TeV',
    'jesFragmentation': 'CMS_vhbb_scale_j_Fragmentation_13TeV',
    'jesSinglePionECAL': 'CMS_vhbb_scale_j_SinglePionECAL_13TeV',
    'jesSinglePionHCAL': 'CMS_vhbb_scale_j_SinglePionHCAL_13TeV',
    'jesFlavorQCD': 'CMS_vhbb_scale_j_FlavorQCD_13TeV',
    'jesRelativeJEREC1': 'CMS_vhbb_scale_j_RelativeJEREC1_13TeV',
#    'jesRelativeJEREC2',
#    'jesRelativeJERHF',
    'jesRelativePtBB': 'CMS_vhbb_scale_j_RelativePtBB_13TeV',
    'jesRelativePtEC1': 'CMS_vhbb_scale_j_RelativePtEC1_13TeV',
    'jesRelativePtEC2': 'CMS_vhbb_scale_j_RelativePtEC2_13TeV',
#    'jesRelativePtHF',
#    'jesRelativeBal',
    'jesRelativeFSR': 'CMS_vhbb_scale_j_RelativeFSR_13TeV',
    'jesRelativeStatFSR': 'CMS_vhbb_scale_j_RelativeStatFSR_13TeV',
    'jesRelativeStatEC': 'CMS_vhbb_scale_j_RelativeStatEC_13TeV',
#    'jesRelativeStatHF',
    'jesPileUpDataMC': 'CMS_vhbb_scale_j_PileUpDataMC_13TeV',
    'jesPileUpPtRef': 'CMS_vhbb_scale_j_PileUpPtRef_13TeV',
    'jesPileUpPtBB': 'CMS_vhbb_scale_j_PileUpPtBB_13TeV',
    'jesPileUpPtEC1': 'CMS_vhbb_scale_j_PileUpPtEC1_13TeV',
    'jesPileUpPtEC2': 'CMS_vhbb_scale_j_PileUpPtEC2_13TeV',
#    'jesPileUpPtHF',
#    'jesPileUpMuZero',
#    'jesPileUpEnvelope',
    'jms': 'CMS_vhbb_scale_j_FatJet_13TeV',
    'jmr': 'CMS_vhbb_res_j_FatJet_13TeV',
#
    'weight_pileUp': 'CMS_vhbb_puWeight',
#    'weight_pileUp: 'CMS_vhbb_puWeight',
#lepton SF
    'muon_eff':'CMS_vhbb_eff_m_Wln_13TeV',
    'electron_eff':'CMS_vhbb_eff_e_Wln_13TeV',
#fit weight
    'ptwweights_tt':'CMS_vhbb_ptwweights_tt',
    'ptwweights_whf':'CMS_vhbb_ptwweights_whf',
    'ptwweights_wlf':'CMS_vhbb_ptwweights_wlf',
# btag weights
    'btagWeight_hfstats1_pt0_eta1': 'CMS_vhbb_bTagWeightHFStats1_pt0_eta1',
    'btagWeight_hfstats1_pt0_eta2': 'CMS_vhbb_bTagWeightHFStats1_pt0_eta2',
    'btagWeight_hfstats1_pt0_eta3': 'CMS_vhbb_bTagWeightHFStats1_pt0_eta3',
    'btagWeight_hfstats1_pt1_eta1': 'CMS_vhbb_bTagWeightHFStats1_pt1_eta1',
    'btagWeight_hfstats1_pt1_eta2': 'CMS_vhbb_bTagWeightHFStats1_pt1_eta2',
    'btagWeight_hfstats1_pt1_eta3': 'CMS_vhbb_bTagWeightHFStats1_pt1_eta3',
    'btagWeight_hfstats1_pt2_eta1': 'CMS_vhbb_bTagWeightHFStats1_pt2_eta1',
    'btagWeight_hfstats1_pt2_eta2': 'CMS_vhbb_bTagWeightHFStats1_pt2_eta2',
    'btagWeight_hfstats1_pt2_eta3': 'CMS_vhbb_bTagWeightHFStats1_pt2_eta3',
    'btagWeight_hfstats1_pt3_eta1': 'CMS_vhbb_bTagWeightHFStats1_pt3_eta1',
    'btagWeight_hfstats1_pt3_eta2': 'CMS_vhbb_bTagWeightHFStats1_pt3_eta2',
    'btagWeight_hfstats1_pt3_eta3': 'CMS_vhbb_bTagWeightHFStats1_pt3_eta3',
    'btagWeight_hfstats1_pt4_eta1': 'CMS_vhbb_bTagWeightHFStats1_pt4_eta1',
    'btagWeight_hfstats1_pt4_eta2': 'CMS_vhbb_bTagWeightHFStats1_pt4_eta2',
    'btagWeight_hfstats1_pt4_eta3': 'CMS_vhbb_bTagWeightHFStats1_pt4_eta3',
#
    'btagWeight_hfstats2_pt0_eta1': 'CMS_vhbb_bTagWeightHFStats2_pt0_eta1',
    'btagWeight_hfstats2_pt0_eta2': 'CMS_vhbb_bTagWeightHFStats2_pt0_eta2',
    'btagWeight_hfstats2_pt0_eta3': 'CMS_vhbb_bTagWeightHFStats2_pt0_eta3',
    'btagWeight_hfstats2_pt1_eta1': 'CMS_vhbb_bTagWeightHFStats2_pt1_eta1',
    'btagWeight_hfstats2_pt1_eta2': 'CMS_vhbb_bTagWeightHFStats2_pt1_eta2',
    'btagWeight_hfstats2_pt1_eta3': 'CMS_vhbb_bTagWeightHFStats2_pt1_eta3',
    'btagWeight_hfstats2_pt2_eta1': 'CMS_vhbb_bTagWeightHFStats2_pt2_eta1',
    'btagWeight_hfstats2_pt2_eta2': 'CMS_vhbb_bTagWeightHFStats2_pt2_eta2',
    'btagWeight_hfstats2_pt2_eta3': 'CMS_vhbb_bTagWeightHFStats2_pt2_eta3',
    'btagWeight_hfstats2_pt3_eta1': 'CMS_vhbb_bTagWeightHFStats2_pt3_eta1',
    'btagWeight_hfstats2_pt3_eta2': 'CMS_vhbb_bTagWeightHFStats2_pt3_eta2',
    'btagWeight_hfstats2_pt3_eta3': 'CMS_vhbb_bTagWeightHFStats2_pt3_eta3',
    'btagWeight_hfstats2_pt4_eta1': 'CMS_vhbb_bTagWeightHFStats2_pt4_eta1',
    'btagWeight_hfstats2_pt4_eta2': 'CMS_vhbb_bTagWeightHFStats2_pt4_eta2',
    'btagWeight_hfstats2_pt4_eta3': 'CMS_vhbb_bTagWeightHFStats2_pt4_eta3',
#
    'btagWeight_lfstats1_pt0_eta1': 'CMS_vhbb_bTagWeightLFStats1_pt0_eta1',
    'btagWeight_lfstats1_pt0_eta2': 'CMS_vhbb_bTagWeightLFStats1_pt0_eta2',
    'btagWeight_lfstats1_pt0_eta3': 'CMS_vhbb_bTagWeightLFStats1_pt0_eta3',
    'btagWeight_lfstats1_pt1_eta1': 'CMS_vhbb_bTagWeightLFStats1_pt1_eta1',
    'btagWeight_lfstats1_pt1_eta2': 'CMS_vhbb_bTagWeightLFStats1_pt1_eta2',
    'btagWeight_lfstats1_pt1_eta3': 'CMS_vhbb_bTagWeightLFStats1_pt1_eta3',
    'btagWeight_lfstats1_pt2_eta1': 'CMS_vhbb_bTagWeightLFStats1_pt2_eta1',
    'btagWeight_lfstats1_pt2_eta2': 'CMS_vhbb_bTagWeightLFStats1_pt2_eta2',
    'btagWeight_lfstats1_pt2_eta3': 'CMS_vhbb_bTagWeightLFStats1_pt2_eta3',
    'btagWeight_lfstats1_pt3_eta1': 'CMS_vhbb_bTagWeightLFStats1_pt3_eta1',
    'btagWeight_lfstats1_pt3_eta2': 'CMS_vhbb_bTagWeightLFStats1_pt3_eta2',
    'btagWeight_lfstats1_pt3_eta3': 'CMS_vhbb_bTagWeightLFStats1_pt3_eta3',
    'btagWeight_lfstats1_pt4_eta1': 'CMS_vhbb_bTagWeightLFStats1_pt4_eta1',
    'btagWeight_lfstats1_pt4_eta2': 'CMS_vhbb_bTagWeightLFStats1_pt4_eta2',
    'btagWeight_lfstats1_pt4_eta3': 'CMS_vhbb_bTagWeightLFStats1_pt4_eta3',
#
    'btagWeight_lfstats2_pt0_eta1': 'CMS_vhbb_bTagWeightLFStats2_pt0_eta1',
    'btagWeight_lfstats2_pt0_eta2': 'CMS_vhbb_bTagWeightLFStats2_pt0_eta2',
    'btagWeight_lfstats2_pt0_eta3': 'CMS_vhbb_bTagWeightLFStats2_pt0_eta3',
    'btagWeight_lfstats2_pt1_eta1': 'CMS_vhbb_bTagWeightLFStats2_pt1_eta1',
    'btagWeight_lfstats2_pt1_eta2': 'CMS_vhbb_bTagWeightLFStats2_pt1_eta2',
    'btagWeight_lfstats2_pt1_eta3': 'CMS_vhbb_bTagWeightLFStats2_pt1_eta3',
    'btagWeight_lfstats2_pt2_eta1': 'CMS_vhbb_bTagWeightLFStats2_pt2_eta1',
    'btagWeight_lfstats2_pt2_eta2': 'CMS_vhbb_bTagWeightLFStats2_pt2_eta2',
    'btagWeight_lfstats2_pt2_eta3': 'CMS_vhbb_bTagWeightLFStats2_pt2_eta3',
    'btagWeight_lfstats2_pt3_eta1': 'CMS_vhbb_bTagWeightLFStats2_pt3_eta1',
    'btagWeight_lfstats2_pt3_eta2': 'CMS_vhbb_bTagWeightLFStats2_pt3_eta2',
    'btagWeight_lfstats2_pt3_eta3': 'CMS_vhbb_bTagWeightLFStats2_pt3_eta3',
    'btagWeight_lfstats2_pt4_eta1': 'CMS_vhbb_bTagWeightLFStats2_pt4_eta1',
    'btagWeight_lfstats2_pt4_eta2': 'CMS_vhbb_bTagWeightLFStats2_pt4_eta2',
    'btagWeight_lfstats2_pt4_eta3': 'CMS_vhbb_bTagWeightLFStats2_pt4_eta3',
#
    'btagWeight_hf_pt0_eta1': 'CMS_vhbb_bTagWeightHF_pt0_eta1',
    'btagWeight_hf_pt0_eta2': 'CMS_vhbb_bTagWeightHF_pt0_eta2',
    'btagWeight_hf_pt0_eta3': 'CMS_vhbb_bTagWeightHF_pt0_eta3',
    'btagWeight_hf_pt1_eta1': 'CMS_vhbb_bTagWeightHF_pt1_eta1',
    'btagWeight_hf_pt1_eta2': 'CMS_vhbb_bTagWeightHF_pt1_eta2',
    'btagWeight_hf_pt1_eta3': 'CMS_vhbb_bTagWeightHF_pt1_eta3',
    'btagWeight_hf_pt2_eta1': 'CMS_vhbb_bTagWeightHF_pt2_eta1',
    'btagWeight_hf_pt2_eta2': 'CMS_vhbb_bTagWeightHF_pt2_eta2',
    'btagWeight_hf_pt2_eta3': 'CMS_vhbb_bTagWeightHF_pt2_eta3',
    'btagWeight_hf_pt3_eta1': 'CMS_vhbb_bTagWeightHF_pt3_eta1',
    'btagWeight_hf_pt3_eta2': 'CMS_vhbb_bTagWeightHF_pt3_eta2',
    'btagWeight_hf_pt3_eta3': 'CMS_vhbb_bTagWeightHF_pt3_eta3',
    'btagWeight_hf_pt4_eta1': 'CMS_vhbb_bTagWeightHF_pt4_eta1',
    'btagWeight_hf_pt4_eta2': 'CMS_vhbb_bTagWeightHF_pt4_eta2',
    'btagWeight_hf_pt4_eta3': 'CMS_vhbb_bTagWeightHF_pt4_eta3',
#
    'btagWeight_jes_pt0_eta1': 'CMS_vhbb_bTagWeightJES_pt0_eta1',
    'btagWeight_jes_pt0_eta2': 'CMS_vhbb_bTagWeightJES_pt0_eta2',
    'btagWeight_jes_pt0_eta3': 'CMS_vhbb_bTagWeightJES_pt0_eta3',
    'btagWeight_jes_pt1_eta1': 'CMS_vhbb_bTagWeightJES_pt1_eta1',
    'btagWeight_jes_pt1_eta2': 'CMS_vhbb_bTagWeightJES_pt1_eta2',
    'btagWeight_jes_pt1_eta3': 'CMS_vhbb_bTagWeightJES_pt1_eta3',
    'btagWeight_jes_pt2_eta1': 'CMS_vhbb_bTagWeightJES_pt2_eta1',
    'btagWeight_jes_pt2_eta2': 'CMS_vhbb_bTagWeightJES_pt2_eta2',
    'btagWeight_jes_pt2_eta3': 'CMS_vhbb_bTagWeightJES_pt2_eta3',
    'btagWeight_jes_pt3_eta1': 'CMS_vhbb_bTagWeightJES_pt3_eta1',
    'btagWeight_jes_pt3_eta2': 'CMS_vhbb_bTagWeightJES_pt3_eta2',
    'btagWeight_jes_pt3_eta3': 'CMS_vhbb_bTagWeightJES_pt3_eta3',
    'btagWeight_jes_pt4_eta1': 'CMS_vhbb_bTagWeightJES_pt4_eta1',
    'btagWeight_jes_pt4_eta2': 'CMS_vhbb_bTagWeightJES_pt4_eta2',
    'btagWeight_jes_pt4_eta3': 'CMS_vhbb_bTagWeightJES_pt4_eta3',
    'btagWeight_lf_pt0_eta1': 'CMS_vhbb_bTagWeightLF_pt0_eta1',
    'btagWeight_lf_pt0_eta2': 'CMS_vhbb_bTagWeightLF_pt0_eta2',
    'btagWeight_lf_pt0_eta3': 'CMS_vhbb_bTagWeightLF_pt0_eta3',
    'btagWeight_lf_pt1_eta1': 'CMS_vhbb_bTagWeightLF_pt1_eta1',
    'btagWeight_lf_pt1_eta2': 'CMS_vhbb_bTagWeightLF_pt1_eta2',
    'btagWeight_lf_pt1_eta3': 'CMS_vhbb_bTagWeightLF_pt1_eta3',
    'btagWeight_lf_pt2_eta1': 'CMS_vhbb_bTagWeightLF_pt2_eta1',
    'btagWeight_lf_pt2_eta2': 'CMS_vhbb_bTagWeightLF_pt2_eta2',
    'btagWeight_lf_pt2_eta3': 'CMS_vhbb_bTagWeightLF_pt2_eta3',
    'btagWeight_lf_pt3_eta1': 'CMS_vhbb_bTagWeightLF_pt3_eta1',
    'btagWeight_lf_pt3_eta2': 'CMS_vhbb_bTagWeightLF_pt3_eta2',
    'btagWeight_lf_pt3_eta3': 'CMS_vhbb_bTagWeightLF_pt3_eta3',
    'btagWeight_lf_pt4_eta1': 'CMS_vhbb_bTagWeightLF_pt4_eta1',
    'btagWeight_lf_pt4_eta2': 'CMS_vhbb_bTagWeightLF_pt4_eta2',
    'btagWeight_lf_pt4_eta3': 'CMS_vhbb_bTagWeightLF_pt4_eta3',
#
    'btagWeight_cerr1_pt0_eta1': 'CMS_vhbb_bTagWeightcErr1_pt0_eta1',
    'btagWeight_cerr1_pt0_eta2': 'CMS_vhbb_bTagWeightcErr1_pt0_eta2',
    'btagWeight_cerr1_pt0_eta3': 'CMS_vhbb_bTagWeightcErr1_pt0_eta3',
    'btagWeight_cerr1_pt1_eta1': 'CMS_vhbb_bTagWeightcErr1_pt1_eta1',
    'btagWeight_cerr1_pt1_eta2': 'CMS_vhbb_bTagWeightcErr1_pt1_eta2',
    'btagWeight_cerr1_pt1_eta3': 'CMS_vhbb_bTagWeightcErr1_pt1_eta3',
    'btagWeight_cerr1_pt2_eta1': 'CMS_vhbb_bTagWeightcErr1_pt2_eta1',
    'btagWeight_cerr1_pt2_eta2': 'CMS_vhbb_bTagWeightcErr1_pt2_eta2',
    'btagWeight_cerr1_pt2_eta3': 'CMS_vhbb_bTagWeightcErr1_pt2_eta3',
    'btagWeight_cerr1_pt3_eta1': 'CMS_vhbb_bTagWeightcErr1_pt3_eta1',
    'btagWeight_cerr1_pt3_eta2': 'CMS_vhbb_bTagWeightcErr1_pt3_eta2',
    'btagWeight_cerr1_pt3_eta3': 'CMS_vhbb_bTagWeightcErr1_pt3_eta3',
    'btagWeight_cerr1_pt4_eta1': 'CMS_vhbb_bTagWeightcErr1_pt4_eta1',
    'btagWeight_cerr1_pt4_eta2': 'CMS_vhbb_bTagWeightcErr1_pt4_eta2',
    'btagWeight_cerr1_pt4_eta3': 'CMS_vhbb_bTagWeightcErr1_pt4_eta3',
#
    'btagWeight_cerr2_pt0_eta1': 'CMS_vhbb_bTagWeightcErr2_pt0_eta1',
    'btagWeight_cerr2_pt0_eta2': 'CMS_vhbb_bTagWeightcErr2_pt0_eta2',
    'btagWeight_cerr2_pt0_eta3': 'CMS_vhbb_bTagWeightcErr2_pt0_eta3',
    'btagWeight_cerr2_pt1_eta1': 'CMS_vhbb_bTagWeightcErr2_pt1_eta1',
    'btagWeight_cerr2_pt1_eta2': 'CMS_vhbb_bTagWeightcErr2_pt1_eta2',
    'btagWeight_cerr2_pt1_eta3': 'CMS_vhbb_bTagWeightcErr2_pt1_eta3',
    'btagWeight_cerr2_pt2_eta1': 'CMS_vhbb_bTagWeightcErr2_pt2_eta1',
    'btagWeight_cerr2_pt2_eta2': 'CMS_vhbb_bTagWeightcErr2_pt2_eta2',
    'btagWeight_cerr2_pt2_eta3': 'CMS_vhbb_bTagWeightcErr2_pt2_eta3',
    'btagWeight_cerr2_pt3_eta1': 'CMS_vhbb_bTagWeightcErr2_pt3_eta1',
    'btagWeight_cerr2_pt3_eta2': 'CMS_vhbb_bTagWeightcErr2_pt3_eta2',
    'btagWeight_cerr2_pt3_eta3': 'CMS_vhbb_bTagWeightcErr2_pt3_eta3',
    'btagWeight_cerr2_pt4_eta1': 'CMS_vhbb_bTagWeightcErr2_pt4_eta1',
    'btagWeight_cerr2_pt4_eta2': 'CMS_vhbb_bTagWeightcErr2_pt4_eta2',
    'btagWeight_cerr2_pt4_eta3': 'CMS_vhbb_bTagWeightcErr2_pt4_eta3',
#
	'CMS_vhbb_LHE_weights_scale_muR_ZH': 'CMS_vhbb_LHE_weights_scale_muR_ZH',
	'CMS_vhbb_LHE_weights_scale_muF_ZH': 'CMS_vhbb_LHE_weights_scale_muF_ZH',
	'CMS_vhbb_LHE_weights_scale_muR_WH': 'CMS_vhbb_LHE_weights_scale_muR_WH',
	'CMS_vhbb_LHE_weights_scale_muF_WH': 'CMS_vhbb_LHE_weights_scale_muF_WH',
	'CMS_vhbb_LHE_weights_scale_muR_ggZH': 'CMS_vhbb_LHE_weights_scale_muR_ggZH',
	'CMS_vhbb_LHE_weights_scale_muF_ggZH': 'CMS_vhbb_LHE_weights_scale_muF_ggZH',
	'CMS_vhbb_LHE_weights_scale_muR_Zj0b': 'CMS_vhbb_LHE_weights_scale_muR_Zj0b',
	'CMS_vhbb_LHE_weights_scale_muF_Zj0b': 'CMS_vhbb_LHE_weights_scale_muF_Zj0b',
	'CMS_vhbb_LHE_weights_scale_muR_Zj1b': 'CMS_vhbb_LHE_weights_scale_muR_Zj1b',
	'CMS_vhbb_LHE_weights_scale_muF_Zj1b': 'CMS_vhbb_LHE_weights_scale_muF_Zj1b',
	'CMS_vhbb_LHE_weights_scale_muR_Zj2b': 'CMS_vhbb_LHE_weights_scale_muR_Zj2b',
	'CMS_vhbb_LHE_weights_scale_muF_Zj2b': 'CMS_vhbb_LHE_weights_scale_muF_Zj2b',
	'CMS_vhbb_LHE_weights_scale_muR_Wj0b': 'CMS_vhbb_LHE_weights_scale_muR_Wj0b',
	'CMS_vhbb_LHE_weights_scale_muF_Wj0b': 'CMS_vhbb_LHE_weights_scale_muF_Wj0b',
	'CMS_vhbb_LHE_weights_scale_muR_Wj1b': 'CMS_vhbb_LHE_weights_scale_muR_Wj1b',
	'CMS_vhbb_LHE_weights_scale_muF_Wj1b': 'CMS_vhbb_LHE_weights_scale_muF_Wj1b',
	'CMS_vhbb_LHE_weights_scale_muR_Wj2b': 'CMS_vhbb_LHE_weights_scale_muR_Wj2b',
	'CMS_vhbb_LHE_weights_scale_muF_Wj2b': 'CMS_vhbb_LHE_weights_scale_muF_Wj2b',
	'CMS_vhbb_LHE_weights_scale_muR_TT': 'CMS_vhbb_LHE_weights_scale_muR_TT',
	'CMS_vhbb_LHE_weights_scale_muF_TT': 'CMS_vhbb_LHE_weights_scale_muF_TT',
	'CMS_vhbb_LHE_weights_scale_muR_QCD': 'CMS_vhbb_LHE_weights_scale_muR_QCD',
	'CMS_vhbb_LHE_weights_scale_muF_QCD': 'CMS_vhbb_LHE_weights_scale_muF_QCD',
#
    'stats':'CMS_vhbb_stats',
# 'homemade' systematics
  'bbtagWeight_tt' : 'CMS_vhbb_bbTagWeight_tt',
  'bbtagWeight_whf' : 'CMS_vhbb_bbTagWeight_whf',
  'bbtagWeight_wlf' : 'CMS_vhbb_bbTagWeight_wlf',
  'bbtagWeight_vv' : 'CMS_vhbb_bbTagWeight_vv',
  'bbtagSF_signal': 'CMS_vhbb_bbTagSF_signal',
  'ptwweights_boost_tt' : 'CMS_vhbb_ptwweightsboost_tt',
  'ptwweights_boost_whf': 'CMS_vhbb_ptwweightsboost_whf',
  'ptwweights_boost_wlf': 'CMS_vhbb_ptwweightsboost_wlf'
	}



replace_cut = [
#dijet
#    'H_mass>H_mass_{syst}_{UD}', 
#    'H_phi>H_phi_{syst}_{UD}', 
#    'H_pt>H_pt_{syst}_{UD}', 
    'H_mass_noFSR>H_mass_noFSR_{syst}_{UD}', 
    'H_phi_noFSR>H_phi_noFSR_{syst}_{UD}', 
    'H_pt_noFSR>H_pt_noFSR_{syst}_{UD}', 
    'H_eta>H_eta_{syst}_{UD}',
#jets
    'Jet_PtReg[hJidxCMVA[0]]>Jet_PtReg[hJidxCMVA[0]]*(Jet_pt_{syst}{UD}[hJidxCMVA[0]]/Jet_Pt[hJidxCMVA[0]])',
    'Jet_PtReg[hJidxCMVA[1]]>Jet_PtReg[hJidxCMVA[1]]*(Jet_pt_{syst}{UD}[hJidxCMVA[1]]/Jet_Pt[hJidxCMVA[1]])',
#    'Jet_Pt>Jet_pt_{syst}{UD}',
#MET
    'MET_Pt>MET_pt_{syst}{UD}',
    'MET_pt>MET_pt*(MET_pt_{syst}{UD}/MET_Pt)',
    'MET_Phi>MET_phi_{syst}{UD}',
    'MET_phi>MET_phi*(MET_phi_{syst}{UD}/MET_Phi)',
#top
    'top_mass>top_mass_{syst}_{UD}',
#BDT
    'BDT_Wlv_v7.Nominal>BDT_Wlv_v7.{syst}_{UD}',
# #add jets
    'Sum$(Jet_Pt>Sum$(Jet_pt_{syst}{UD}',
    'Sum$((Jet_Pt>Sum$((Jet_pt_{syst}{UD}',
    'Jet_lepFilter)*Jet_Pt))>Jet_lepFilter)*Jet_pt_{syst}{UD}))',
# for boost
    'FatJet_msoftdrop_sys>FatJet_msoftdrop_sys_{syst}_{UD}',
    'FatJet_pt_sys>FatJet_pt_sys_{syst}_{UD}']


 
#'top_mass>top_mass_{syst}{UD}']

#sys_cut_suffix = {'jesTotal':<!LimitGeneral|replace_cut!>}
#sys_cut_suffix = {
#    'jesTotal': <!LimitGeneral|replace_cut!>,
##    'jesTotal': <!LimitGeneral|replace_cut!>,
#    'jer': <!LimitGeneral|replace_cut!>
#    }

sys_cut_suffix = {'jesTotal':<!LimitGeneral|replace_cut!>,'jer':<!LimitGeneral|replace_cut!>,'jesAbsoluteStat':<!LimitGeneral|replace_cut!>,'jesAbsoluteScale':<!LimitGeneral|replace_cut!>,'jesAbsoluteFlavMap':<!LimitGeneral|replace_cut!>,'jesAbsoluteMPFBias':<!LimitGeneral|replace_cut!>,'jesFragmentation':<!LimitGeneral|replace_cut!>,'jesSinglePionECAL':<!LimitGeneral|replace_cut!>,'jesSinglePionHCAL':<!LimitGeneral|replace_cut!>,'jesFlavorQCD':<!LimitGeneral|replace_cut!>,'jesRelativeJEREC1':<!LimitGeneral|replace_cut!>,'jesRelativeJEREC2':<!LimitGeneral|replace_cut!>,'jesRelativeJERHF':<!LimitGeneral|replace_cut!>,'jesRelativePtBB':<!LimitGeneral|replace_cut!>,'jesRelativePtEC1':<!LimitGeneral|replace_cut!>,'jesRelativePtEC2':<!LimitGeneral|replace_cut!>,'jesRelativePtHF':<!LimitGeneral|replace_cut!>,'jesRelativeBal':<!LimitGeneral|replace_cut!>,'jesRelativeFSR':<!LimitGeneral|replace_cut!>,'jesRelativeStatFSR':<!LimitGeneral|replace_cut!>,'jesRelativeStatEC':<!LimitGeneral|replace_cut!>,'jesRelativeStatHF':<!LimitGeneral|replace_cut!>,'jesPileUpDataMC':<!LimitGeneral|replace_cut!>,'jesPileUpPtRef':<!LimitGeneral|replace_cut!>,'jesPileUpPtBB':<!LimitGeneral|replace_cut!>,'jesPileUpPtEC1':<!LimitGeneral|replace_cut!>,'jesPileUpPtEC2':<!LimitGeneral|replace_cut!>,'jesPileUpPtHF':<!LimitGeneral|replace_cut!>,'jesPileUpMuZero':<!LimitGeneral|replace_cut!>,'jesPileUpEnvelope':<!LimitGeneral|replace_cut!>,'minmax':<!LimitGeneral|replace_cut!>,'jms':<!LimitGeneral|replace_cut!>,'jmr':<!LimitGeneral|replace_cut!>}

sys_weight_corr ={}

#decorrelate_sys_weight = {}
decorrelate_sys_weight = {
  'ptwweights_whf': ['WJets_1b','WJets_2b','ST'],
  'ptwweights_tt': ['TT'],
  'ptwweights_wlf': ['WJets_0b'],
	'CMS_vhbb_LHE_weights_scale_muR_ZH': ['ZH'],
	'CMS_vhbb_LHE_weights_scale_muF_ZH': ['ZH'],
	'CMS_vhbb_LHE_weights_scale_muR_WH': ['WH'],
	'CMS_vhbb_LHE_weights_scale_muF_WH': ['WH'],
	'CMS_vhbb_LHE_weights_scale_muR_ggZH': ['ggZH'],
	'CMS_vhbb_LHE_weights_scale_muF_ggZH': ['ggZH'],
	'CMS_vhbb_LHE_weights_scale_muR_Zj0b': ['Z_udscg'],
	'CMS_vhbb_LHE_weights_scale_muF_Zj0b': ['Z_udscg'],
	'CMS_vhbb_LHE_weights_scale_muR_Zj1b': ['Zb'],
	'CMS_vhbb_LHE_weights_scale_muF_Zj1b': ['Zb'],
	'CMS_vhbb_LHE_weights_scale_muR_Zj2b': ['Zbb'],
	'CMS_vhbb_LHE_weights_scale_muF_Zj2b': ['Zbb'],
	'CMS_vhbb_LHE_weights_scale_muR_Wj0b': ['WJets_0b'],
	'CMS_vhbb_LHE_weights_scale_muF_Wj0b': ['WJets_0b'],
	'CMS_vhbb_LHE_weights_scale_muR_Wj1b': ['WJets_1b'],
	'CMS_vhbb_LHE_weights_scale_muF_Wj1b': ['WJets_1b'],
	'CMS_vhbb_LHE_weights_scale_muR_Wj2b': ['WJets_2b'],
	'CMS_vhbb_LHE_weights_scale_muF_Wj2b': ['WJets_2b'],
	'CMS_vhbb_LHE_weights_scale_muR_TT': ['TT'],
	'CMS_vhbb_LHE_weights_scale_muF_TT': ['TT'],
	'CMS_vhbb_LHE_weights_scale_muR_QCD': ['QCD'],
	'CMS_vhbb_LHE_weights_scale_muF_QCD': ['QCD'],
# "homemade" weights
  'bbtagWeight_tt' : ['TT', 'ST'],
  'bbtagWeight_whf' : ['WJets_1b','WJets_2b'],
  'bbtagWeight_wlf' : ['WJets_0b'],
  'bbtagWeight_vv' : ['VVLF','VVHF'],
  'bbtagSF_signal': ['ZH','WH','ggZH'],
  'ptwweights_boost_tt' : ['TT'],
  'ptwweights_boost_whf': ['WJets_1b','WJets_2b','ST'],
  'ptwweights_boost_wlf': ['WJets_0b']}

sys_cut_include = []

#sys_cut_suffix = {'jesTotal':<!LimitGeneral|replace_cut!>,
#    'jer':<!LimitGeneral|replace_cut!>,
#    'jesAbsoluteStat':<!LimitGeneral|replace_cut!>,
#    'jesAbsoluteScale':<!LimitGeneral|replace_cut!>,
#    'jesAbsoluteFlavMap':<!LimitGeneral|replace_cut!>,
#    'jesAbsoluteMPFBias':<!LimitGeneral|replace_cut!>,
#    'jesFragmentation':<!LimitGeneral|replace_cut!>,
#    'jesSinglePionECAL':<!LimitGeneral|replace_cut!>,
#    'jesSinglePionHCAL':<!LimitGeneral|replace_cut!>,
#    'jesFlavorQCD':<!LimitGeneral|replace_cut!>,
#    'jesRelativeJEREC1':<!LimitGeneral|replace_cut!>,
#    'jesRelativeJEREC2':<!LimitGeneral|replace_cut!>,
#    'jesRelativeJERHF':<!LimitGeneral|replace_cut!>,
#    'jesRelativePtBB':<!LimitGeneral|replace_cut!>,
#    'jesRelativePtEC1':<!LimitGeneral|replace_cut!>,
#    'jesRelativePtEC2':<!LimitGeneral|replace_cut!>,
#    'jesRelativePtHF':<!LimitGeneral|replace_cut!>,
#    'jesRelativeBal':<!LimitGeneral|replace_cut!>,
#    'jesRelativeFSR':<!LimitGeneral|replace_cut!>,
#    'jesRelativeStatFSR':<!LimitGeneral|replace_cut!>,
#    'jesRelativeStatEC':<!LimitGeneral|replace_cut!>,
#    'jesRelativeStatHF':<!LimitGeneral|replace_cut!>,
#    'jesPileUpDataMC':<!LimitGeneral|replace_cut!>,
#    'jesPileUpPtRef':<!LimitGeneral|replace_cut!>,
#    'jesPileUpPtBB':<!LimitGeneral|replace_cut!>,
#    'jesPileUpPtEC1':<!LimitGeneral|replace_cut!>,
#    'jesPileUpPtEC2':<!LimitGeneral|replace_cut!>,
#    'jesPileUpPtHF':<!LimitGeneral|replace_cut!>,
#    'jesPileUpMuZero':<!LimitGeneral|replace_cut!>,
#    'jesPileUpEnvelope':<!LimitGeneral|replace_cut!>}

# Bin-by-Bin Statistics (sqrtN doesn't apply)
binstat = True

binstat_cr = True 

# Rescale Stat Shapes by sqrtN
rescaleSqrtN = False

# No Stat Shapes
ignore_stats = False

# Inject Signal
signal_inject = None

# Data Blinding
blind = False

# Toy Data
toy = False

# Datacard Samples Setup (Signal followed by background)
#setup       = ['WH', 'WJets_0b', 'WJets_1b', 'WJets_2b', 'TT', 'VVLF', 'VVHF', 'ST']

#setup = ['WminusH','WplusH','ZHbb','ggZH','Zbb','Zb','Z_udscg','WJets_0b','WJets_1b','WJets_2b','TT','VVLF','VVHF','ST']
##setup       = ['Zbb']
#setupSignals = ['WminusH','WplusH','ZHbb','ggZH']
##'WH','ZHbb'

;setup = ['WH','ZHbb','ggZH','Zbb','Zb','Z_udscg','WJets_0b','WJets_1b','WJets_2b','TT','VVLF','VVHF','ST']
;setupSignals = ['WH','ZHbb','ggZH']

;no ggZH
setup = ['WH','ZHbb','Zbb','Zb','Z_udscg','WJets_0b','WJets_1b','WJets_2b','TT','VVLF','VVHF','ST']
setupSignals = ['WH','ZHbb']



# Lists from general config
# note: use trainingBKG to remove QCD
#BKG = [<!Samples|trainingBKG!>]
#BKG = ['ZJetsB_2b']
Group = <!Plot_general|Group!>

# Naming of Processes
# note: need to include ZH (but not ggZH ?)
# note: Z+jets background also needs to be included ?
Dict = {
#	'WminusH': 'WH_hbb',
#	'WplusH': 'WH_hbb',
	'WH': 'WH_hbb',
	'ZHbb': 'ZH_hbb',
	'ggZH': 'ggZH_hbb',
	'WJets_0b': 'Wj0b',
	'WJets_1b': 'Wj1b',
	'WJets_2b': 'Wj2b',
	'Z_udscg': 'Zj0b',
	'Zb': 'Zj1b',
	'Zbb': 'Zj2b',
	'TT': 'TT',
	'ST': 's_Top',
	'QCD': 'QCD',
	'VVHF': 'VVHF',
	'VVLF': 'VVLF',
	}

ptRegionsDict = {'HighPt': ['HighPt']}

removeWeightSystematics = {'Wlm': ['electron_eff'],'Wle': ['muon_eff'],'Sigu': ['electron_eff'],'Sige': ['muon_eff']}
# CAN I REMOVE THIS ?
#removeWeightSystematics = {'Zee': ['CMS_vhbb_eff_m_13TeV', 'CMS_vhbb_eff_m_trigger_Zll_13TeV', 'CMS_vhbb_eff_m_MVAID_Zll_13TeV', 'CMS_vhbb_eff_m_tracker_Zll_13TeV', 'CMS_vhbb_eff_m_ISO_Zll_13TeV'],
# 'Zuu': ['CMS_vhbb_eff_e_13TeV', 'CMS_vhbb_eff_e_trigger_Zll_13TeV', 'CMS_vhbb_eff_e_MVAID_Zll_13TeV', 'CMS_vhbb_eff_e_MVAID_Zll_eta0_13TeV', 'CMS_vhbb_eff_e_MVAID_Zll_eta1_13TeV', 'CMS_vhbb_eff_e_tracker_Zll_13TeV']}

;;;;
; RESOLVED DC
;;;;

; All DCs
;List: Wlm_SR_HighPt,Wle_SR_HighPt,Wlm_Wlf_HighPt,Wle_Wlf_HighPt,Wlm_tt_HighPt,Wle_tt_HighPt,Wlm_WhflM_HighPt,Wle_WhflM_HighPt,Wlm_WhfhM_HighPt,Wle_WhfhM_HighPt

;List: Wlm_Wlf_HighPt


;;;;
; BOOST DC
;;;;

;List for final dc
List = Sigu_BOOST,Sige_BOOST,Wlm_tt_BOOST,Wlm_Wlfv11_BOOST,Wlm_Whf_BOOST,Wle_tt_BOOST,Wle_Wlfv11_BOOST,Wle_Whf_BOOST

;other

;List = Sigu_BOOST,Sige_BOOST,Wlm_tt_BOOST,Wlm_Wlfv11_BOOST,Wlm_Whf_BOOST,Wle_tt_BOOST,Wle_Wlfv11_BOOST,Wle_Whf_BOOST
;List = Wlm_Wlfv11_BOOST,Wle_Wlfv11_BOOST

;List = Sigu_BOOST,Sige_BOOST
;List = Sigu_BOOST

[Datacard]

# Systematic Uncertanties
InUse = [ 'lumi_13TeV',
    'pdf_qqbar',
	'pdf_gg',
#	'QCDscale_VH',
#	'QCDscale_ttbar',
#	'QCDscale_VV',
#	'QCDscale_VH_ggZHacceptance_lowPt',
#	'QCDscale_VH_ggZHacceptance_highPt',
	'CMS_vhbb_boost_EWK_13TeV',
#	'CMS_vhbb_boost_QCD_13TeV',
	'CMS_vhbb_ST',
	'CMS_vhbb_VV',
#   'CMS_vhbb_trigger_MET_13TeV',
	'CMS_vhbb_LHE_weights_pdf_ZH',
	'CMS_vhbb_LHE_weights_pdf_WH',
	'CMS_vhbb_LHE_weights_pdf_TT',
	'CMS_vhbb_LHE_weights_pdf_Wj0b',
	'CMS_vhbb_LHE_weights_pdf_Wj1b',
	'CMS_vhbb_LHE_weights_pdf_Wj2b',
	'CMS_vhbb_LHE_weights_pdf_Zj0b',
	'CMS_vhbb_LHE_weights_pdf_Zj1b',
	'CMS_vhbb_LHE_weights_pdf_Zj2b',
	'CMS_vhbb_LHE_weights_pdf_VVLF',
	'CMS_vhbb_LHE_weights_pdf_VVHF'
	]

InUse_cr_HighPt      = <!Datacard|InUse!>
#InUse_cr_NoSysRegion = <!Datacard|InUse!>

#InUse_BDT_LowPt = <!Datacard|InUse!>
;InUse_BDT_HighPt = <!Datacard|InUse!>
InUse_BDT_HighPt = [
    'lumi_13TeV',
    'pdf_qqbar',
	'pdf_gg',
#	'QCDscale_VH',
#	'QCDscale_ttbar',
#	'QCDscale_VV',
#	'QCDscale_VH_ggZHacceptance_lowPt',
#	'QCDscale_VH_ggZHacceptance_highPt',
	'CMS_vhbb_boost_EWK_13TeV',
#	'CMS_vhbb_boost_QCD_13TeV',
	'CMS_vhbb_ST',
	'CMS_vhbb_VV',
#   'CMS_vhbb_trigger_MET_13TeV',
	'CMS_vhbb_LHE_weights_pdf_ZH',
	'CMS_vhbb_LHE_weights_pdf_WH',
	'CMS_vhbb_LHE_weights_pdf_TT',
	'CMS_vhbb_LHE_weights_pdf_Wj0b',
	'CMS_vhbb_LHE_weights_pdf_Wj1b',
#	'CMS_vhbb_LHE_weights_pdf_VVLF',
	'CMS_vhbb_LHE_weights_pdf_VVHF'
	]

# Luminosity Uncertainties
# Around 2% for all non-data driven samples: ZH, ggZH, WH, VV, ST, QCD
lumi_13TeV = {
    'type': 'lnN',
	'ZH': 1.026,
    'ZHbb': 1.026,
	'ggZH': 1.026,
	'WH': 1.026,
	'WJets_0b': 1.026,
	'WJets_1b': 1.026,
	'WJets_2b': 1.026,
	'Z_udscg': 1.026,
	'Zb': 1.026,
	'Zbb': 1.026,
	'VVLF': 1.026,
	'VVHF': 1.026,
	'TT': 1.026,
	'ST': 1.026,
	'QCD': 1.026,
	}

# qq PDF Uncertainties
# Around 1% for all non-data driven samples generated by qq: ZH, WH, VV
pdf_qqbar = {
    'type': 'lnN',
	'ZH': 1.01,
    'ZHbb': 1.01,
	'ggZH': 1.01,
	'WH': 1.01,
	'VVLF': 1.01,
	'VVHF': 1.01,
	}

# gg PDF Uncertainties
# Around 1% for all non-data driven samples generated by gg: ggZH, ST, QCD
pdf_gg = {
    'type': 'lnN',
    'ST': 1.01,
	}

# QCD Scale Uncertainties
QCDscale_VH = {
    'type': 'lnN',
	'ZH': 1.04,
	'WH': 1.04,
	'ggZH': 1.04,
	}

QCDscale_ttbar = {
    'type': 'lnN',
	'TT': 1.06,
	}

QCDscale_VV = {
    'type': 'lnN',
    'VVHF': 1.04,
	'VVLF': 1.04,
	}

QCDscale_QCD = {
    'type': 'lnN',
	'QCD': 1.30,
	}

QCDscale_VH_ggZHacceptance_lowPt = {
    'type': 'lnN',
	'ggZH': 1.32,
	}

QCDscale_VH_ggZHacceptance_highPt = {
    'type': 'lnN',
	'ggZH': 1.32,
	}

# Electroweak and QCD Correction Uncertainties
CMS_vhbb_boost_EWK_13TeV = {
    'type': 'lnN',
	'ZH': 1.02,
	'WH': 1.02,
	'ggZH': 1.02,
	}

CMS_vhbb_boost_QCD_13TeV = {
    'type': 'lnN',
	'ZH': 1.05,
	'WH': 1.05,
	'ggZH': 1.05,
	}

# More Uncertainties (I'll figure them out later.)
CMS_vhbb_ST = {
    'type': 'lnN',
	'ST': 1.15,
	}

CMS_vhbb_VV = {
    'type': 'lnN',
	'VVLF': 1.15,
	'VVHF': 1.15,
	}

# Electron/Muon Efficiencies?
CMS_vhbb_eff_e_13TeV = {'type': 'lnN'}

CMS_vhbb_eff_m_13TeV = {'type': 'lnN'}

# MET Trigger Uncertainties
CMS_vhbb_trigger_MET_13TeV = {
    'type': 'lnN',
	'ggZH': 1.02,
	'ZH': 1.02,
	'WH': 1.02,
	'ST': 1.02,
	'VVHF': 1.02,
	'VVLF': 1.02,
	'QCD': 1.02,
	}

# LHE PDF Weights Uncertainties
CMS_vhbb_LHE_weights_pdf_ZH = {
    'type': 'lnN',
	'ZH': 1.01
    }

CMS_vhbb_LHE_weights_pdf_WH = {
    'type': 'lnN',
	'WH': 1.01
    }

CMS_vhbb_LHE_weights_pdf_TT = {
    'type': 'lnN',
    'TT': 1.005
    }

CMS_vhbb_LHE_weights_pdf_Wj0b = {
    'type': 'lnN',
	'WJets_0b': 1.05
	}

CMS_vhbb_LHE_weights_pdf_Wj1b = {
    'type': 'lnN',
	'WJets_1b': 1.03
	}

CMS_vhbb_LHE_weights_pdf_Wj2b = {
    'type': 'lnN',
	'WJets_2b': 1.02
	}

CMS_vhbb_LHE_weights_pdf_Zj0b = {
    'type': 'lnN',
	'Z_udscg': 1.05
	}

CMS_vhbb_LHE_weights_pdf_Zj1b = {
    'type': 'lnN',
	'Zb': 1.03
	}

CMS_vhbb_LHE_weights_pdf_Zj2b = {
    'type': 'lnN',
	'Zbb': 1.02
	}

CMS_vhbb_LHE_weights_pdf_VVLF = {
    'type': 'lnN',
	'VVLF': 1.03
	} 
CMS_vhbb_LHE_weights_pdf_VVHF = {
    'type': 'lnN',
	'VVHF': 1.02
	}

# RateParams
rateParams_RESOLVED = [
    	'SF_TT_Wln',
	'SF_Wj0b_Wln',
	'SF_Wj1b_Wln',
	'SF_Wj2b_Wln',
	]

rateParams_BOOST= [
    	'SF_TT_Wln',
	'SF_Wj0b_Wln',
	'SF_Wj1b_Wln',
	'SF_Wj2b_Wln',
	]

rateParams = <!Datacard|rateParams_<!General|Analysis!>!>


rateParamRange_RESOLVED = [0.3, 3]
rateParamRange_BOOST 	= [0.3, 5]
rateParamRange = <!Datacard|rateParamRange_<!General|Analysis!>!>

rateParams_BDT_HighPt = <!Datacard|rateParams!>
rateParams_BDT_LowPt = <!Datacard|rateParams!>
rateParams_BDT_NoSysRegion = <!Datacard|rateParams!>

rateParams_cr_HighPt = <!Datacard|rateParams!>
rateParams_cr_NoSysRegion = <!Datacard|rateParams!>

#-------------------------------------------------
# Scale Factor Datacards


SF_TT_Wln = {'TT': 1}
SF_Wj0b_Wln = {'Wj0b': 1}
SF_Wj1b_Wln = {'Wj1b': 1}
SF_Wj2b_Wln = {'Wj2b': 1}

#-----------------
# Signal Region

[dc:Wlm_SR_HighPt]
var       = <!LimitGeneral|BDToutname!>
wsVarName = Wlm_SR_HighPt_ov<!General|Overlap!>
range     = <!LimitGeneral|BDTrange!>
dcName    = Wlm_SR_HighPt_ov<!General|Overlap!>
;cut       = Sigu
cut       = SiguBDTCut_RESOLVED
signal    = [<!Plot_general|allSIG!>]
background= [<!Plot_general|trainingBKG!>]
dcBin     =  Wlm_SR_HighPt_ov<!General|Overlap!>
data      = <!Plot_general|Data!>
type      = BDT 

[dc:Wle_SR_HighPt]
var       = <!LimitGeneral|BDToutname!>
wsVarName = Wle_SR_HighPt_ov<!General|Overlap!>
range     = <!LimitGeneral|BDTrange!>
dcName    = Wle_SR_HighPt_ov<!General|Overlap!>
cut       = SigeBDTCut_RESOLVED
signal    = [<!Plot_general|allSIG!>]
background= [<!Plot_general|trainingBKG!>]
dcBin     = Wle_SR_HighPt_ov<!General|Overlap!>
data      = <!Plot_general|Data!>
type      = BDT 

#-----------------
# Control Regions

[dc:Wlm_Wlf_HighPt]
var       = <!LimitGeneral|BTagVar!>
wsVarName = Wlm_Wlf_HighPt_ov<!General|Overlap!>
range     = <!LimitGeneral|BTagVarRange!>
dcName    = Wlm_Wlf_HighPt_ov<!General|Overlap!>
cut       = Wlfu_RESOLVED
signal    = [<!Plot_general|allSIG!>]
background = [<!Plot_general|trainingBKG!>]
dcBin     = Wlm_Wlf_HighPt_ov<!General|Overlap!>
data      = <!Plot_general|Data!>
type      = cr

[dc:Wle_Wlf_HighPt]
var       = <!LimitGeneral|BTagVar!>
wsVarName = Wle_Wlf_HighPt_ov<!General|Overlap!>
range     = <!LimitGeneral|BTagVarRange!>
dcName    = Wle_Wlf_HighPt_ov<!General|Overlap!>
cut       = Wlfe_RESOLVED
signal    = [<!Plot_general|allSIG!>]
background = [<!Plot_general|trainingBKG!>]
dcBin     = Wle_Wlf_HighPt_ov<!General|Overlap!>
data      = <!Plot_general|Data!>
type      = cr

[dc:Wlm_tt_HighPt]
var       = <!LimitGeneral|BTagVar!>
wsVarName = Wlm_tt_HighPt_ov<!General|Overlap!>
range     = <!LimitGeneral|BTagVarRange!>
dcName    = Wlm_tt_HighPt_ov<!General|Overlap!>
cut       = ttu_RESOLVED
signal    = [<!Plot_general|allSIG!>]
background = [<!Plot_general|trainingBKG!>]
dcBin     = Wlm_tt_HighPt_ov<!General|Overlap!>
data      = <!Plot_general|Data!>
type      = cr

[dc:Wle_tt_HighPt]
var       = <!LimitGeneral|BTagVar!>
wsVarName = Wle_tt_HighPt_ov<!General|Overlap!>
range     = <!LimitGeneral|BTagVarRange!>
dcName    = Wle_tt_HighPt_ov<!General|Overlap!>
cut       = tte_RESOLVED
signal    = [<!Plot_general|allSIG!>]
background = [<!Plot_general|trainingBKG!>]
dcBin     = Wle_tt_HighPt_ov<!General|Overlap!>
data      = <!Plot_general|Data!>
type      = cr

[dc:Wlm_WhflM_HighPt]
var       = <!LimitGeneral|BTagVar!>
wsVarName = Wlm_WhflM_HighPt_ov<!General|Overlap!>
range     = <!LimitGeneral|BTagVarRange!>
dcName    = Wlm_WhflM_HighPt_ov<!General|Overlap!>
cut       = WhflMu_RESOLVED
signal    = [<!Plot_general|allSIG!>]
background = [<!Plot_general|trainingBKG!>]
dcBin     = Wlm_WhflM_HighPt_ov<!General|Overlap!>
data      = <!Plot_general|Data!>
type      = cr

[dc:Wle_WhflM_HighPt]
var       = <!LimitGeneral|BTagVar!>
wsVarName = Wle_WhflM_HighPt_ov<!General|Overlap!>
range     = <!LimitGeneral|BTagVarRange!>
dcName    = Wle_WhflM_HighPt_ov<!General|Overlap!>
cut       = WhflMe_RESOLVED
signal    = [<!Plot_general|allSIG!>]
background = [<!Plot_general|trainingBKG!>]
dcBin     = Wle_WhflM_HighPt_ov<!General|Overlap!>
data      = <!Plot_general|Data!>
type      = cr

[dc:Wlm_WhfhM_HighPt]
var       = <!LimitGeneral|BTagVar!>
wsVarName = Wlm_WhfhM_HighPt_ov<!General|Overlap!>
range     = <!LimitGeneral|BTagVarRange!>
dcName    = Wlm_WhfhM_HighPt_ov<!General|Overlap!>
cut       = WhfhMu_RESOLVED
signal    = [<!Plot_general|allSIG!>]
background = [<!Plot_general|trainingBKG!>]
dcBin     = Wlm_WhfhM_HighPt_ov<!General|Overlap!>
data      = <!Plot_general|Data!>
type      = cr

[dc:Wle_WhfhM_HighPt]
var       = <!LimitGeneral|BTagVar!>
wsVarName = Wle_WhfhM_HighPt_ov<!General|Overlap!>
range     = <!LimitGeneral|BTagVarRange!>
dcName    = Wle_WhfhM_HighPt_ov<!General|Overlap!>
cut       = WhfhMe_RESOLVED
signal    = [<!Plot_general|allSIG!>]
background = [<!Plot_general|trainingBKG!>]
dcBin     = Wle_WhfhM_HighPt_ov<!General|Overlap!>
data      = <!Plot_general|Data!>
type      = cr

#-----------------
# BOOST
#-----------------

#-----------------
# Signal Region

[dc:Sigu_BOOST]
var       = <!LimitGeneral|BDToutname_BOOST!>
wsVarName = Sigu_BOOST
range     = <!LimitGeneral|BDTrange_BOOST!>
dcName    = Sigu_BOOST
cut       = Sigu_BOOSTv3
signal    = [<!Plot_general|allSIG!>]
background= [<!Plot_general|trainingBKG!>]
dcBin     = Sigu_BOOST
data      = <!Plot_general|Data!>
type      = BDT 

[dc:Sige_BOOST]
var       = <!LimitGeneral|BDToutname_BOOST!>
wsVarName = Sige_BOOST
range     = <!LimitGeneral|BDTrange_BOOST!>
dcName    = Sige_BOOST
cut       = Sige_BOOSTv3
signal    = [<!Plot_general|allSIG!>]
background= [<!Plot_general|trainingBKG!>]
dcBin     = Sige_BOOST
data      = <!Plot_general|Data!>
type      = BDT 


#-----------------
# Control Region

[dc:Wlm_Wlfv2_BOOST]
var       = <!LimitGeneral|BTagVar_BOOST!>
wsVarName = Wlm_Wlfv2_BOOST
range     = <!LimitGeneral|BTagVarRange_BOOST!>
dcName    = Wlm_Wlfv2_BOOST
cut       = Wlfu_BOOSTv2
signal    = [<!Plot_general|allSIG!>]
background = [<!Plot_general|trainingBKG!>]
dcBin     = Wlm_Wlfv2_BOOST
data      = <!Plot_general|Data!>
type      = cr

[dc:Wlm_Wlfv10_BOOST]
var       = <!LimitGeneral|BTagVar_BOOST!>
wsVarName = Wlm_Wlfv10_BOOST
range     = <!LimitGeneral|BTagVarRange_BOOST!>
dcName    = Wlm_Wlfv10_BOOST
cut       = Wlfu_BOOSTv10
signal    = [<!Plot_general|allSIG!>]
background = [<!Plot_general|trainingBKG!>]
dcBin     = Wlm_Wlfv10_BOOST
data      = <!Plot_general|Data!>
type      = cr

[dc:Wlm_Wlfv11_BOOST]
var       = <!LimitGeneral|BTagVar_BOOST!>
wsVarName = Wlm_Wlfv11_BOOST
range     = <!LimitGeneral|BTagVarRange2_BOOST!>
dcName    = Wlm_Wlfv11_BOOST
cut       = Wlfu_BOOSTv11
signal    = [<!Plot_general|allSIG!>]
background = [<!Plot_general|trainingBKG!>]
dcBin     = Wlm_Wlfv11_BOOST
data      = <!Plot_general|Data!>
type      = cr

[dc:Wle_Wlfv2_BOOST]
var       = <!LimitGeneral|BTagVar_BOOST!>
wsVarName = Wle_Wlfv2_BOOST
range     = <!LimitGeneral|BTagVarRange_BOOST!>
dcName    = Wle_Wlfv2_BOOST
cut       = Wlfe_BOOSTv2
signal    = [<!Plot_general|allSIG!>]
background = [<!Plot_general|trainingBKG!>]
dcBin     = Wle_Wlfv2_BOOST
data      = <!Plot_general|Data!>
type      = cr

[dc:Wle_Wlfv10_BOOST]
var       = <!LimitGeneral|BTagVar_BOOST!>
wsVarName = Wle_Wlfv10_BOOST
range     = <!LimitGeneral|BTagVarRange_BOOST!>
dcName    = Wle_Wlfv10_BOOST
cut       = Wlfe_BOOSTv10
signal    = [<!Plot_general|allSIG!>]
background = [<!Plot_general|trainingBKG!>]
dcBin     = Wle_Wlfv10_BOOST
data      = <!Plot_general|Data!>
type      = cr

[dc:Wle_Wlfv11_BOOST]
var       = <!LimitGeneral|BTagVar_BOOST!>
wsVarName = Wle_Wlfv11_BOOST
range     = <!LimitGeneral|BTagVarRange2_BOOST!>
dcName    = Wle_Wlfv11_BOOST
cut       = Wlfe_BOOSTv11
signal    = [<!Plot_general|allSIG!>]
background = [<!Plot_general|trainingBKG!>]
dcBin     = Wle_Wlfv11_BOOST
data      = <!Plot_general|Data!>
type      = cr

[dc:Wlm_tt_BOOST]
var       = <!LimitGeneral|BTagVar_BOOST!>
wsVarName = Wlm_tt_BOOST
range     = <!LimitGeneral|BTagVarRange1_BOOST!>
dcName    = Wlm_tt_BOOST
cut       = ttu_BOOST
signal    = [<!Plot_general|allSIG!>]
background = [<!Plot_general|trainingBKG!>]
dcBin     = Wlm_tt_BOOST
data      = <!Plot_general|Data!>
type      = cr

[dc:Wle_tt_BOOST]
var       = <!LimitGeneral|BTagVar_BOOST!>
wsVarName = Wle_tt_BOOST
range     = <!LimitGeneral|BTagVarRange1_BOOST!>
dcName    = Wle_tt_BOOST
cut       = tte_BOOST
signal    = [<!Plot_general|allSIG!>]
background = [<!Plot_general|trainingBKG!>]
dcBin     = Wle_tt_BOOST
data      = <!Plot_general|Data!>
type      = cr

[dc:Wlm_Whf_BOOST]
var       = <!LimitGeneral|BTagVar_BOOST!>
wsVarName = Wlm_Whf_BOOST
range     = <!LimitGeneral|BTagVarRange1_BOOST!>
dcName    = Wlm_Whf_BOOST
cut       = Whfu_BOOSTv2
signal    = [<!Plot_general|allSIG!>]
background = [<!Plot_general|trainingBKG!>]
dcBin     = Wlm_Whf_BOOST
data      = <!Plot_general|Data!>
type      = cr

[dc:Wle_Whf_BOOST]
var       = <!LimitGeneral|BTagVar_BOOST!>
wsVarName = Wle_Whf_BOOST
range     = <!LimitGeneral|BTagVarRange1_BOOST!>
dcName    = Wle_Whf_BOOST
cut       = Whfe_BOOSTv2
signal    = [<!Plot_general|allSIG!>]
background = [<!Plot_general|trainingBKG!>]
dcBin     = Wle_Whf_BOOST
data      = <!Plot_general|Data!>
type      = cr

